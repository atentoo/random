"use strict";const le=require("../../../../@babel/runtime/helpers/esm/extends.cjs"),b=require("../../../../@babel/runtime/helpers/esm/objectSpread2.cjs"),se=require("../../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),ue=require("../../../../../_virtual/index.cjs"),ce=require("../../../../rc-motion/es/CSSMotion.cjs");require("../../../../rc-motion/es/CSSMotionList.cjs");const pe=require("react"),fe=require("../../../../rc-resize-observer/es/index.cjs"),de=require("../../../../rc-util/es/hooks/useLayoutEffect.cjs"),me=require("../../../../rc-util/es/ref.cjs"),ge=require("./Arrow.cjs"),he=require("./Mask.cjs"),ve=require("./PopupContent.cjs");function be(e){const l=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const f=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(l,n,f.get?f:{enumerable:!0,get:()=>e[n]})}}return l.default=e,Object.freeze(l)}const r=be(pe);var M=r.forwardRef(function(e,l){var n=e.popup,f=e.className,d=e.prefixCls,R=e.style,E=e.target,I=e.onVisibleChanged,o=e.open,j=e.keepDom,L=e.fresh,S=e.onClick,V=e.mask,C=e.arrow,y=e.arrowPos,m=e.align,g=e.motion,A=e.maskMotion,P=e.forceRender,s=e.getPopupContainer,H=e.autoDestroy,W=e.portal,D=e.zIndex,_=e.onMouseEnter,B=e.onMouseLeave,T=e.onPointerEnter,X=e.onPointerDownCapture,Y=e.ready,F=e.offsetX,G=e.offsetY,J=e.offsetR,K=e.offsetB,Q=e.onAlign,N=e.onPrepare,u=e.stretch,h=e.targetWidth,v=e.targetHeight,U=typeof n=="function"?n():n,Z=o||j,x=(s==null?void 0:s.length)>0,$=r.useState(!s||!x),O=se($,2),q=O[0],ee=O[1];if(de.default(function(){!q&&x&&E&&ee(!0)},[q,x,E]),!q)return null;var a="auto",t={left:"-1000vw",top:"-1000vh",right:a,bottom:a};if(Y||!o){var w,k=m.points,z=m.dynamicInset||((w=m._experimental)===null||w===void 0?void 0:w.dynamicInset),te=z&&k[0][1]==="r",re=z&&k[0][0]==="b";te?(t.right=J,t.left=a):(t.left=F,t.right=a),re?(t.bottom=K,t.top=a):(t.top=G,t.bottom=a)}var i={};return u&&(u.includes("height")&&v?i.height=v:u.includes("minHeight")&&v&&(i.minHeight=v),u.includes("width")&&h?i.width=h:u.includes("minWidth")&&h&&(i.minWidth=h)),o||(i.pointerEvents="none"),r.createElement(W,{open:P||Z,getContainer:s&&function(){return s(E)},autoDestroy:H},r.createElement(he,{prefixCls:d,open:o,zIndex:D,mask:V,motion:A}),r.createElement(fe,{onResize:Q,disabled:!o},function(ne){return r.createElement(ce.default,le({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:P,leavedClassName:"".concat(d,"-hidden")},g,{onAppearPrepare:N,onEnterPrepare:N,visible:o,onVisibleChanged:function(c){var p;g==null||(p=g.onVisibleChanged)===null||p===void 0||p.call(g,c),I(c)}}),function(c,p){var oe=c.className,ae=c.style,ie=ue(d,oe,f);return r.createElement("div",{ref:me.composeRef(ne,l,p),className:ie,style:b(b(b(b({"--arrow-x":"".concat(y.x||0,"px"),"--arrow-y":"".concat(y.y||0,"px")},t),i),ae),{},{boxSizing:"border-box",zIndex:D},R),onMouseEnter:_,onMouseLeave:B,onPointerEnter:T,onClick:S,onPointerDownCapture:X},C&&r.createElement(ge,{prefixCls:d,arrow:C,arrowPos:y,align:m}),r.createElement(ve,{cache:!o&&!L},U))})}))});process.env.NODE_ENV!=="production"&&(M.displayName="Popup"),module.exports=M;
