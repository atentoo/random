import H from "../../../../@babel/runtime/helpers/esm/slicedToArray.js";
import { useState as I, useRef as E, useEffect as L } from "react";
function N(e) {
  var x = e.targetRef, D = e.containerRef, y = e.direction, i = e.onDragChange, s = e.onDragChangeComplete, w = e.calculate, C = e.color, M = e.disabledDrag, R = I({ x: 0, y: 0 }), v = H(R, 2), l = v[0], X = v[1], t = E(null), n = E(null);
  L(function() {
    X(w());
  }, [C]), L(function() {
    return function() {
      document.removeEventListener("mousemove", t.current), document.removeEventListener("mouseup", n.current), document.removeEventListener("touchmove", t.current), document.removeEventListener("touchend", n.current), t.current = null, n.current = null;
    };
  }, []);
  var f = function(r) {
    var g = function(d) {
      var h = "touches" in d ? d.touches[0] : d, F = document.documentElement.scrollLeft || document.body.scrollLeft || window.pageXOffset, G = document.documentElement.scrollTop || document.body.scrollTop || window.pageYOffset;
      return { pageX: h.pageX - F, pageY: h.pageY - G };
    }(r), Y = g.pageX, b = g.pageY, u = D.current.getBoundingClientRect(), O = u.x, B = u.y, S = u.width, T = u.height, p = x.current.getBoundingClientRect(), m = p.width, a = p.height, j = m / 2, k = a / 2, q = Math.max(0, Math.min(Y - O, S)) - j, z = Math.max(0, Math.min(b - B, T)) - k, A = { x: q, y: y === "x" ? l.y : z };
    if (m === 0 && a === 0 || m !== a) return !1;
    i == null || i(A);
  }, o = function(r) {
    r.preventDefault(), f(r);
  }, c = function(r) {
    r.preventDefault(), document.removeEventListener("mousemove", t.current), document.removeEventListener("mouseup", n.current), document.removeEventListener("touchmove", t.current), document.removeEventListener("touchend", n.current), t.current = null, n.current = null, s == null || s();
  };
  return [l, function(r) {
    document.removeEventListener("mousemove", t.current), document.removeEventListener("mouseup", n.current), M || (f(r), document.addEventListener("mousemove", o), document.addEventListener("mouseup", c), document.addEventListener("touchmove", o), document.addEventListener("touchend", c), t.current = o, n.current = c);
  }];
}
export {
  N as default
};
