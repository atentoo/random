"use strict";const G=require("../../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),u=require("react");module.exports=function(e){var L=e.targetRef,x=e.containerRef,y=e.direction,a=e.onDragChange,v=e.onDragChangeComplete,D=e.calculate,w=e.color,R=e.disabledDrag,C=u.useState({x:0,y:0}),l=G(C,2),f=l[0],M=l[1],t=u.useRef(null),n=u.useRef(null);u.useEffect(function(){M(D())},[w]),u.useEffect(function(){return function(){document.removeEventListener("mousemove",t.current),document.removeEventListener("mouseup",n.current),document.removeEventListener("touchmove",t.current),document.removeEventListener("touchend",n.current),t.current=null,n.current=null}},[]);var g=function(r){var h=function(s){var E="touches"in s?s.touches[0]:s,A=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,F=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:E.pageX-A,pageY:E.pageY-F}}(r),X=h.pageX,Y=h.pageY,o=x.current.getBoundingClientRect(),b=o.x,O=o.y,q=o.width,B=o.height,p=L.current.getBoundingClientRect(),i=p.width,d=p.height,S=i/2,T=d/2,j=Math.max(0,Math.min(X-b,q))-S,k=Math.max(0,Math.min(Y-O,B))-T,z={x:j,y:y==="x"?f.y:k};if(i===0&&d===0||i!==d)return!1;a==null||a(z)},c=function(r){r.preventDefault(),g(r)},m=function(r){r.preventDefault(),document.removeEventListener("mousemove",t.current),document.removeEventListener("mouseup",n.current),document.removeEventListener("touchmove",t.current),document.removeEventListener("touchend",n.current),t.current=null,n.current=null,v==null||v()};return[f,function(r){document.removeEventListener("mousemove",t.current),document.removeEventListener("mouseup",n.current),R||(g(r),document.addEventListener("mousemove",c),document.addEventListener("mouseup",m),document.addEventListener("touchmove",c),document.addEventListener("touchend",m),t.current=c,n.current=m)}]};
