import b from "../../../../@babel/runtime/helpers/esm/slicedToArray.js";
import n, { useRef as m } from "react";
import D from "../hooks/useColorDrag.js";
import H from "./Palette.js";
import M from "../../../../../_virtual/index.js";
import w from "../../../../rc-util/es/hooks/useEvent.js";
import "../../../../rc-util/es/hooks/useLayoutEffect.js";
import "../../../../rc-util/es/ref.js";
import "../../../../rc-util/es/warning.js";
import { Color as S } from "../color.js";
import { calculateColor as T, calcOffset as j } from "../util.js";
import k from "./Gradient.js";
import z from "./Handler.js";
import N from "./Transform.js";
var W = function(e) {
  var a = e.prefixCls, f = e.colors, d = e.disabled, x = e.onChange, h = e.onChangeComplete, o = e.color, t = e.type, c = m(), i = m(), l = m(o), u = function(r) {
    return t === "hue" ? r.getHue() : 100 * r.a;
  }, v = w(function(r) {
    var C = T({ offset: r, targetRef: i, containerRef: c, color: o, type: t });
    l.current = C, x(u(C));
  }), y = D({ color: o, targetRef: i, containerRef: c, calculate: function() {
    return j(o, t);
  }, onDragChange: v, onDragChangeComplete: function() {
    h(u(l.current));
  }, direction: "x", disabledDrag: d }), s = b(y, 2), p = s[0], g = s[1], E = n.useMemo(function() {
    if (t === "hue") {
      var r = o.toHsb();
      return r.s = 1, r.b = 1, r.a = 1, new S(r);
    }
    return o;
  }, [o, t]), R = n.useMemo(function() {
    return f.map(function(r) {
      return "".concat(r.color, " ").concat(r.percent, "%");
    });
  }, [f]);
  return n.createElement("div", { ref: c, className: M("".concat(a, "-slider"), "".concat(a, "-slider-").concat(t)), onMouseDown: g, onTouchStart: g }, n.createElement(H, { prefixCls: a }, n.createElement(N, { x: p.x, y: p.y, ref: i }, n.createElement(z, { size: "small", color: E.toHexString(), prefixCls: a })), n.createElement(k, { colors: R, type: t, prefixCls: a })));
};
export {
  W as default
};
