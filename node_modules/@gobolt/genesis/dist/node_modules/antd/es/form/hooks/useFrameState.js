import * as e from "react";
import c from "../../../../rc-util/es/raf.js";
function p(f) {
  const [l, s] = e.useState(f), r = e.useRef(null), u = e.useRef([]), t = e.useRef(!1);
  return e.useEffect(() => (t.current = !1, () => {
    t.current = !0, c.cancel(r.current), r.current = null;
  }), []), [l, function(a) {
    t.current || (r.current === null && (u.current = [], r.current = c(() => {
      r.current = null, s((o) => {
        let n = o;
        return u.current.forEach((m) => {
          n = m(n);
        }), n;
      });
    })), u.current.push(a));
  }];
}
export {
  p as default
};
