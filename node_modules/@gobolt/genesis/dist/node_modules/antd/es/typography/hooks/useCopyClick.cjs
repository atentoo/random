"use strict";const y=require("react"),v=require("../../../../../_virtual/index5.cjs"),m=require("../../../../rc-util/es/hooks/useEvent.cjs"),g=require("../../_util/toList.cjs");function h(o){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(o){for(const n in o)if(n!=="default"){const c=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(e,n,c.get?c:{enumerable:!0,get:()=>o[n]})}}return e.default=o,Object.freeze(e)}const p=h(y);var b=function(o,e,n,c){return new(n||(n=Promise))(function(f,s){function i(r){try{u(c.next(r))}catch(t){s(t)}}function a(r){try{u(c.throw(r))}catch(t){s(t)}}function u(r){var t;r.done?f(r.value):(t=r.value,t instanceof n?t:new n(function(l){l(t)})).then(i,a)}u((c=c.apply(o,e||[])).next())})};module.exports=o=>{let{copyConfig:e,children:n}=o;const[c,f]=p.useState(!1),[s,i]=p.useState(!1),a=p.useRef(null),u=()=>{a.current&&clearTimeout(a.current)},r={};return e.format&&(r.format=e.format),p.useEffect(()=>u,[]),{copied:c,copyLoading:s,onClick:m(t=>b(void 0,void 0,void 0,function*(){var l;t==null||t.preventDefault(),t==null||t.stopPropagation(),i(!0);try{const d=typeof e.text=="function"?yield e.text():e.text;v(d||g(n,!0).join("")||"",r),i(!1),f(!0),u(),a.current=setTimeout(()=>{f(!1)},3e3),(l=e.onCopy)===null||l===void 0||l.call(e,t)}catch(d){throw i(!1),d}}))}};
