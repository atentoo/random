"use strict";const j=require("react"),G=require("../../../@ant-design/icons/es/icons/EllipsisOutlined.cjs"),c=require("../../../../_virtual/index.cjs"),H=require("../../../rc-menu/es/index.cjs"),J=require("../../../rc-util/es/hooks/useEvent.cjs"),K=require("../../../rc-util/es/omit.cjs"),Q=require("../_util/motion.cjs"),X=require("../_util/reactNode.cjs"),Y=require("../_util/warning.cjs");require("../config-provider/index.cjs");const Z=require("../config-provider/hooks/useCSSVarCls.cjs"),ee=require("./MenuContext.cjs"),ne=require("./MenuDivider.cjs"),le=require("./MenuItem.cjs"),P=require("./OverrideContext.cjs"),oe=require("./style/index.cjs"),te=require("./SubMenu.cjs"),re=require("../config-provider/context.cjs");function ie(e){const s=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const l=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(s,t,l.get?l:{enumerable:!0,get:()=>e[t]})}}return s.default=e,Object.freeze(s)}const a=ie(j);var ae=function(e,s){var t={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&s.indexOf(l)<0&&(t[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)s.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(t[l[n]]=e[l[n]])}return t};function x(e){return e===null||e===!1}const se={item:le,submenu:te,divider:ne},ue=j.forwardRef((e,s)=>{var t;const l=a.useContext(P.default),n=l||{},{getPrefixCls:y,getPopupContainer:E,direction:p,menu:o}=a.useContext(re.ConfigContext),m=y(),{prefixCls:w,className:M,style:_,theme:d="light",expandIcon:u,_internalDisableMenuItemTitleTooltip:I,inlineCollapsed:g,siderCollapsed:T,rootClassName:$,mode:f,selectable:N,onClick:O,overflowedIndicatorPopupClassName:D}=e,k=ae(e,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),S=K(k,["collapsedWidth"]);if(process.env.NODE_ENV!=="production"){const i=Y.devUseWarning("Menu");process.env.NODE_ENV!=="production"&&i(!("inlineCollapsed"in e&&f!=="inline"),"usage","`inlineCollapsed` should only be used when `mode` is inline."),i.deprecated("items"in e&&!e.children,"children","items")}(t=n.validator)===null||t===void 0||t.call(n,{mode:f});const z=J(function(){var i;O==null||O.apply(void 0,arguments),(i=n.onClick)===null||i===void 0||i.call(n)}),q=n.mode||f,V=N??n.selectable,v=g??T,W={horizontal:{motionName:`${m}-slide-up`},inline:Q.default(m),other:{motionName:`${m}-zoom-big`}},r=y("menu",w||n.prefixCls),h=Z(r),[L,R,U]=oe.default(r,h,!l),A=c(`${r}-${d}`,o==null?void 0:o.className,M),B=a.useMemo(()=>{var i,C;if(typeof u=="function"||x(u))return u||null;if(typeof n.expandIcon=="function"||x(n.expandIcon))return n.expandIcon||null;if(typeof(o==null?void 0:o.expandIcon)=="function"||x(o==null?void 0:o.expandIcon))return(o==null?void 0:o.expandIcon)||null;const b=(i=u??(n==null?void 0:n.expandIcon))!==null&&i!==void 0?i:o==null?void 0:o.expandIcon;return X.cloneElement(b,{className:c(`${r}-submenu-expand-icon`,a.isValidElement(b)?(C=b.props)===null||C===void 0?void 0:C.className:void 0)})},[u,n==null?void 0:n.expandIcon,o==null?void 0:o.expandIcon,r]),F=a.useMemo(()=>({prefixCls:r,inlineCollapsed:v||!1,direction:p,firstLevel:!0,theme:d,mode:q,disableMenuItemTitleTooltip:I}),[r,v,p,I,d]);return L(a.createElement(P.default.Provider,{value:null},a.createElement(ee.Provider,{value:F},a.createElement(H.default,Object.assign({getPopupContainer:E,overflowedIndicator:a.createElement(G,null),overflowedIndicatorPopupClassName:c(r,`${r}-${d}`,D),mode:q,selectable:V,onClick:z},S,{inlineCollapsed:v,style:Object.assign(Object.assign({},o==null?void 0:o.style),_),className:A,prefixCls:r,direction:p,defaultMotions:W,expandIcon:B,ref:s,rootClassName:c($,R,n.rootClassName,U,h),_internalComponents:se})))))});module.exports=ue;
