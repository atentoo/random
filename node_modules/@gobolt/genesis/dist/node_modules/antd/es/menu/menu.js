import * as r from "react";
import { forwardRef as F } from "react";
import G from "../../../@ant-design/icons/es/icons/EllipsisOutlined.js";
import d from "../../../../_virtual/index.js";
import H from "../../../rc-menu/es/index.js";
import J from "../../../rc-util/es/hooks/useEvent.js";
import K from "../../../rc-util/es/omit.js";
import Q from "../_util/motion.js";
import { cloneElement as X } from "../_util/reactNode.js";
import { devUseWarning as Y } from "../_util/warning.js";
import "../config-provider/index.js";
import Z from "../config-provider/hooks/useCSSVarCls.js";
import ee from "./MenuContext.js";
import oe from "./MenuDivider.js";
import ne from "./MenuItem.js";
import P from "./OverrideContext.js";
import le from "./style/index.js";
import te from "./SubMenu.js";
import { ConfigContext as ie } from "../config-provider/context.js";
var re = function(o, m) {
  var a = {};
  for (var l in o) Object.prototype.hasOwnProperty.call(o, l) && m.indexOf(l) < 0 && (a[l] = o[l]);
  if (o != null && typeof Object.getOwnPropertySymbols == "function") {
    var e = 0;
    for (l = Object.getOwnPropertySymbols(o); e < l.length; e++) m.indexOf(l[e]) < 0 && Object.prototype.propertyIsEnumerable.call(o, l[e]) && (a[l[e]] = o[l[e]]);
  }
  return a;
};
function I(o) {
  return o === null || o === !1;
}
const ae = { item: ne, submenu: te, divider: oe }, Pe = F((o, m) => {
  var a;
  const l = r.useContext(P), e = l || {}, { getPrefixCls: b, getPopupContainer: w, direction: c, menu: n } = r.useContext(ie), u = b(), { prefixCls: j, className: M, style: _, theme: p = "light", expandIcon: s, _internalDisableMenuItemTitleTooltip: y, inlineCollapsed: N, siderCollapsed: $, rootClassName: T, mode: f, selectable: g, onClick: O, overflowedIndicatorPopupClassName: k } = o, D = re(o, ["prefixCls", "className", "style", "theme", "expandIcon", "_internalDisableMenuItemTitleTooltip", "inlineCollapsed", "siderCollapsed", "rootClassName", "mode", "selectable", "onClick", "overflowedIndicatorPopupClassName"]), V = K(D, ["collapsedWidth"]);
  if (process.env.NODE_ENV !== "production") {
    const i = Y("Menu");
    process.env.NODE_ENV !== "production" && i(!("inlineCollapsed" in o && f !== "inline"), "usage", "`inlineCollapsed` should only be used when `mode` is inline."), i.deprecated("items" in o && !o.children, "children", "items");
  }
  (a = e.validator) === null || a === void 0 || a.call(e, { mode: f });
  const z = J(function() {
    var i;
    O == null || O.apply(void 0, arguments), (i = e.onClick) === null || i === void 0 || i.call(e);
  }), h = e.mode || f, S = g ?? e.selectable, v = N ?? $, W = { horizontal: { motionName: `${u}-slide-up` }, inline: Q(u), other: { motionName: `${u}-zoom-big` } }, t = b("menu", j || e.prefixCls), E = Z(t), [L, R, U] = le(t, E, !l), q = d(`${t}-${p}`, n == null ? void 0 : n.className, M), A = r.useMemo(() => {
    var i, C;
    if (typeof s == "function" || I(s)) return s || null;
    if (typeof e.expandIcon == "function" || I(e.expandIcon)) return e.expandIcon || null;
    if (typeof (n == null ? void 0 : n.expandIcon) == "function" || I(n == null ? void 0 : n.expandIcon)) return (n == null ? void 0 : n.expandIcon) || null;
    const x = (i = s ?? (e == null ? void 0 : e.expandIcon)) !== null && i !== void 0 ? i : n == null ? void 0 : n.expandIcon;
    return X(x, { className: d(`${t}-submenu-expand-icon`, r.isValidElement(x) ? (C = x.props) === null || C === void 0 ? void 0 : C.className : void 0) });
  }, [s, e == null ? void 0 : e.expandIcon, n == null ? void 0 : n.expandIcon, t]), B = r.useMemo(() => ({ prefixCls: t, inlineCollapsed: v || !1, direction: c, firstLevel: !0, theme: p, mode: h, disableMenuItemTitleTooltip: y }), [t, v, c, y, p]);
  return L(r.createElement(P.Provider, { value: null }, r.createElement(ee.Provider, { value: B }, r.createElement(H, Object.assign({ getPopupContainer: w, overflowedIndicator: r.createElement(G, null), overflowedIndicatorPopupClassName: d(t, `${t}-${p}`, k), mode: h, selectable: S, onClick: z }, V, { inlineCollapsed: v, style: Object.assign(Object.assign({}, n == null ? void 0 : n.style), _), className: q, prefixCls: t, direction: c, defaultMotions: W, expandIcon: A, ref: m, rootClassName: d(T, R, e.rootClassName, U, E), _internalComponents: ae })))));
});
export {
  Pe as default
};
