"use strict";const t=require("react"),B=require("../../../../_virtual/index.cjs"),$e=require("../../../rc-util/es/omit.cjs"),qe=require("../../../rc-util/es/ref.cjs"),ke=require("../_util/warning.cjs"),je=require("../_util/wave/index.cjs"),Be=require("../config-provider/context.cjs"),Se=require("../config-provider/DisabledContext.cjs"),_e=require("../config-provider/hooks/useSize.cjs"),Ie=require("../space/Compact.cjs"),re=require("./button-group.cjs"),p=require("./buttonHelpers.cjs"),Te=require("./DefaultLoadingIcon.cjs"),ne=require("./IconWrapper.cjs"),Ve=require("./style/index.cjs"),Pe=require("./style/compact.cjs");var we=function(s,b){var u={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&b.indexOf(r)<0&&(u[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function"){var l=0;for(r=Object.getOwnPropertySymbols(s);l<r.length;l++)b.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(s,r[l])&&(u[r[l]]=s[r[l]])}return u};const Ue={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},y=t.forwardRef((s,b)=>{var u,r;const{loading:l=!1,prefixCls:oe,color:v,variant:C,type:S,danger:N=!1,shape:h="default",size:_,styles:I,disabled:T,className:se,rootClassName:le,children:c,icon:a,iconPosition:ae="start",ghost:V=!1,block:ie=!1,htmlType:ue="button",classNames:P,style:ce={},autoInsertSpace:w,autoFocus:de}=s,U=we(s,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),x=S||"default",[D,d]=t.useMemo(()=>{if(v&&C)return[v,C];const e=Ue[x]||[];return N?["danger",e[1]]:e},[S,v,C,N]),R=D==="danger"?"dangerous":D,{getPrefixCls:fe,direction:z,autoInsertSpace:pe,className:me,style:ge,classNames:be,styles:ye}=Be.useComponentConfig("button"),E=(u=w??pe)===null||u===void 0||u,n=fe("btn",oe),[F,ve,Ce]=Ve(n),Ne=t.useContext(Se.default),f=T??Ne,he=t.useContext(re.GroupSizeContext),m=t.useMemo(()=>function(e){if(typeof e=="object"&&e){let o=e==null?void 0:e.delay;return o=Number.isNaN(o)||typeof o!="number"?0:o,{loading:o<=0,delay:o}}return{loading:!!e,delay:0}}(l),[l]),[i,G]=t.useState(m.loading),[O,M]=t.useState(!1),g=t.useRef(null),A=qe.useComposeRef(b,g),W=t.Children.count(c)===1&&!a&&!p.isUnBorderedButtonVariant(d),$=t.useRef(!0);t.useEffect(()=>($.current=!1,()=>{$.current=!0}),[]),t.useEffect(()=>{let e=null;return m.delay>0?e=setTimeout(()=>{e=null,G(!0)},m.delay):G(m.loading),function(){e&&(clearTimeout(e),e=null)}},[m]),t.useEffect(()=>{if(!g.current||!E)return;const e=g.current.textContent||"";W&&p.isTwoCNChar(e)?O||M(!0):O&&M(!1)}),t.useEffect(()=>{de&&g.current&&g.current.focus()},[]);const H=t.useCallback(e=>{var o;i||f?e.preventDefault():(o=s.onClick)===null||o===void 0||o.call(s,e)},[s.onClick,i,f]);if(process.env.NODE_ENV!=="production"){const e=ke.devUseWarning("Button");process.env.NODE_ENV!=="production"&&e(!(typeof a=="string"&&a.length>2),"breaking",`\`icon\` is using ReactNode instead of string naming in v4. Please check \`${a}\` at https://ant.design/components/icon`),process.env.NODE_ENV!=="production"&&e(!(V&&p.isUnBorderedButtonVariant(d)),"usage","`link` or `text` button can't be a `ghost` button.")}const{compactSize:xe,compactItemClassnames:J}=Ie.useCompactItemContext(n,z),Ee={large:"lg",small:"sm",middle:void 0},K=_e(e=>{var o,j;return(j=(o=_??xe)!==null&&o!==void 0?o:he)!==null&&j!==void 0?j:e}),L=K&&(r=Ee[K])!==null&&r!==void 0?r:"",Oe=i?"loading":a,q=$e(U,["navigate"]),Q=B(n,ve,Ce,{[`${n}-${h}`]:h!=="default"&&h,[`${n}-${x}`]:x,[`${n}-dangerous`]:N,[`${n}-color-${R}`]:R,[`${n}-variant-${d}`]:d,[`${n}-${L}`]:L,[`${n}-icon-only`]:!c&&c!==0&&!!Oe,[`${n}-background-ghost`]:V&&!p.isUnBorderedButtonVariant(d),[`${n}-loading`]:i,[`${n}-two-chinese-chars`]:O&&E&&!i,[`${n}-block`]:ie,[`${n}-rtl`]:z==="rtl",[`${n}-icon-end`]:ae==="end"},J,se,le,me),X=Object.assign(Object.assign({},ge),ce),Y=B(P==null?void 0:P.icon,be.icon),Z=Object.assign(Object.assign({},(I==null?void 0:I.icon)||{}),ye.icon||{}),ee=a&&!i?t.createElement(ne,{prefixCls:n,className:Y,style:Z},a):l&&typeof l=="object"&&l.icon?t.createElement(ne,{prefixCls:n,className:Y,style:Z},l.icon):t.createElement(Te,{existIcon:!!a,prefixCls:n,loading:i,mount:$.current}),te=c||c===0?p.spaceChildren(c,W&&E):null;if(q.href!==void 0)return F(t.createElement("a",Object.assign({},q,{className:B(Q,{[`${n}-disabled`]:f}),href:f?void 0:q.href,style:X,onClick:H,ref:A,tabIndex:f?-1:0}),ee,te));let k=t.createElement("button",Object.assign({},U,{type:ue,className:Q,style:X,onClick:H,disabled:f,ref:A}),ee,te,J&&t.createElement(Pe,{prefixCls:n}));return p.isUnBorderedButtonVariant(d)||(k=t.createElement(je,{component:"Button",disabled:i},k)),F(k)});y.Group=re.default,y.__ANT_BUTTON=!0,process.env.NODE_ENV!=="production"&&(y.displayName="Button"),module.exports=y;
