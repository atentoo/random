"use strict";const T=require("react"),I=require("../../../@ant-design/icons/es/icons/SearchOutlined.cjs"),U=require("../../../../_virtual/index.cjs"),V=require("../../../rc-util/es/ref.cjs"),k=require("../_util/reactNode.cjs"),F=require("../button/button.cjs");require("../config-provider/index.cjs");const G=require("../config-provider/hooks/useSize.cjs"),H=require("../space/Compact.cjs"),J=require("./Input.cjs"),K=require("../config-provider/context.cjs");function L(t){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(i,r,o.get?o:{enumerable:!0,get:()=>t[r]})}}return i.default=t,Object.freeze(i)}const u=L(T);var Q=function(t,i){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&i.indexOf(o)<0&&(r[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var l=0;for(o=Object.getOwnPropertySymbols(t);l<o.length;l++)i.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(t,o[l])&&(r[o[l]]=t[o[l]])}return r};const z=u.forwardRef((t,i)=>{const{prefixCls:r,inputPrefixCls:o,className:l,size:C,suffix:D,enterButton:p=!1,addonAfter:g,loading:O,disabled:x,onSearch:f,onChange:E,onCompositionStart:h,onCompositionEnd:j}=t,_=Q(t,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:S,direction:q}=u.useContext(K.ConfigContext),v=u.useRef(!1),a=S("input-search",r),A=S("input",o),{compactSize:B}=H.useCompactItemContext(a,q),d=G(e=>{var n;return(n=C??B)!==null&&n!==void 0?n:e}),b=u.useRef(null),N=e=>{var n;document.activeElement===((n=b.current)===null||n===void 0?void 0:n.input)&&e.preventDefault()},y=e=>{var n,s;f&&f((s=(n=b.current)===null||n===void 0?void 0:n.input)===null||s===void 0?void 0:s.value,e,{source:"input"})},$=typeof p=="boolean"?u.createElement(I,null):null,w=`${a}-button`;let m;const c=p||{},P=c.type&&c.type.__ANT_BUTTON===!0;m=P||c.type==="button"?k.cloneElement(c,Object.assign({onMouseDown:N,onClick:e=>{var n,s;(s=(n=c==null?void 0:c.props)===null||n===void 0?void 0:n.onClick)===null||s===void 0||s.call(n,e),y(e)},key:"enterButton"},P?{className:w,size:d}:{})):u.createElement(F,{className:w,type:p?"primary":void 0,size:d,disabled:x,key:"enterButton",onMouseDown:N,onClick:y,loading:O,icon:$},p),g&&(m=[m,k.cloneElement(g,{key:"addonAfter"})]);const M=U(a,{[`${a}-rtl`]:q==="rtl",[`${a}-${d}`]:!!d,[`${a}-with-button`]:!!p},l),R=Object.assign(Object.assign({},_),{className:M,prefixCls:A,type:"search"});return u.createElement(J.default,Object.assign({ref:V.composeRef(b,i),onPressEnter:e=>{v.current||O||y(e)}},R,{size:d,onCompositionStart:e=>{v.current=!0,h==null||h(e)},onCompositionEnd:e=>{v.current=!1,j==null||j(e)},addonAfter:m,suffix:D,onChange:e=>{e!=null&&e.target&&e.type==="click"&&f&&f(e.target.value,e,{source:"clear"}),E==null||E(e)},disabled:x}))});process.env.NODE_ENV!=="production"&&(z.displayName="Search"),module.exports=z;
