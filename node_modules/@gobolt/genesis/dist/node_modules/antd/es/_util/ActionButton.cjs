"use strict";const q=require("react"),P=require("../../../rc-util/es/hooks/useState.cjs"),C=require("../button/button.cjs"),S=require("../button/buttonHelpers.cjs");function T(e){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(i,r,o.get?o:{enumerable:!0,get:()=>e[r]})}}return i.default=e,Object.freeze(i)}const s=T(q);function p(e){return!!(e!=null&&e.then)}module.exports=e=>{const{type:i,children:r,prefixCls:o,buttonProps:m,close:f,autoFocus:b,emitEvent:h,isSilent:d,quitOnNullishReturnValue:y,actionFn:l}=e,n=s.useRef(!1),v=s.useRef(null),[O,a]=P(!1),c=function(){f==null||f.apply(void 0,arguments)};return s.useEffect(()=>{let u=null;return b&&(u=setTimeout(()=>{var t;(t=v.current)===null||t===void 0||t.focus({preventScroll:!0})})),()=>{u&&clearTimeout(u)}},[]),s.createElement(C,Object.assign({},S.convertLegacyProps(i),{onClick:u=>{if(n.current)return;if(n.current=!0,!l)return void c();let t;if(h){if(t=l(u),y&&!p(t))return n.current=!1,void c(u)}else if(l.length)t=l(f),n.current=!1;else if(t=l(),!p(t))return void c();(g=>{p(g)&&(a(!0),g.then(function(){a(!1,!0),c.apply(void 0,arguments),n.current=!1},j=>{if(a(!1,!0),n.current=!1,!(d!=null&&d()))return Promise.reject(j)}))})(t)},loading:O,prefixCls:o},m,{ref:v}),r)};
