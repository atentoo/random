"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const b=require("../../../@babel/runtime/helpers/esm/typeof.cjs"),N=require("../../../@babel/runtime/helpers/esm/toConsumableArray.cjs"),K=require("../../../@babel/runtime/helpers/esm/objectSpread2.cjs"),D=require("../../../@babel/runtime/helpers/esm/objectWithoutProperties.cjs"),j=require("../../../rc-util/es/Children/toArray.cjs"),C=require("../../../rc-util/es/omit.cjs"),O=require("../../../rc-util/es/warning.cjs"),B=require("./keyUtil.cjs");var F=["children"];function P(e,n){return"".concat(e,"-").concat(n)}function G(e){return e&&e.type&&e.type.isTreeNode}function T(e,n){return e??n}function E(e){var n=e||{},i=n.title||"title";return{title:i,_title:n._title||[i],key:n.key||"key",children:n.children||"children"}}function S(e,n,i){var a,c=(b(i)==="object"?i:{externalGetKey:i})||{},p=c.childrenPropName,d=c.externalGetKey,l=E(c.fieldNames),s=l.key,o=l.children,v=p||o;d?typeof d=="string"?a=function(r){return r[d]}:typeof d=="function"&&(a=function(r){return d(r)}):a=function(r,t){return T(r[s],t)},function r(t,g,f,y){var m=t?t[v]:e,h=t?P(f.pos,g):"0",k=t?[].concat(N(y),[t]):[];if(t){var u=a(t,h),x={node:t,index:g,pos:h,key:u,parentPos:f.node?f.pos:null,level:f.level+1,nodes:k};n(x)}m&&m.forEach(function(q,w){r(q,w,{node:t,pos:h,level:f?f.level+1:-1},k)})}(null)}exports.convertDataToEntities=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.initWrapper,a=n.processEntity,c=n.onProcessFinished,p=n.externalGetKey,d=n.childrenPropName,l=n.fieldNames,s=p||(arguments.length>2?arguments[2]:void 0),o={},v={},r={posEntities:o,keyEntities:v};return i&&(r=i(r)||r),S(e,function(t){var g=t.node,f=t.index,y=t.pos,m=t.key,h=t.parentPos,k=t.level,u={node:g,nodes:t.nodes,index:f,key:m,pos:y,level:k},x=T(m,y);o[y]=u,v[x]=u,u.parent=o[h],u.parent&&(u.parent.children=u.parent.children||[],u.parent.children.push(u)),a&&a(u,r)},{externalGetKey:s,childrenPropName:d,fieldNames:l}),c&&c(r),r},exports.convertNodePropsToEventData=function(e){var n=e.data,i=e.expanded,a=e.selected,c=e.checked,p=e.loaded,d=e.loading,l=e.halfChecked,s=e.dragOver,o=e.dragOverGapTop,v=e.dragOverGapBottom,r=e.pos,t=e.active,g=e.eventKey,f=K(K({},n),{},{expanded:i,selected:a,checked:c,loaded:p,loading:d,halfChecked:l,dragOver:s,dragOverGapTop:o,dragOverGapBottom:v,pos:r,active:t,key:g});return"props"in f||Object.defineProperty(f,"props",{get:function(){return O.warningOnce(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),f},exports.convertTreeToData=function(e){return function n(i){return j(i).map(function(a){if(!G(a))return O.warningOnce(!a,"Tree/TreeNode can only accept TreeNode as children."),null;var c=a.key,p=a.props,d=p.children,l=D(p,F),s=K({key:c},l),o=n(d);return o.length&&(s.children=o),s}).filter(function(a){return a})}(e)},exports.fillFieldNames=E,exports.flattenTreeData=function(e,n,i){var a=E(i),c=a._title,p=a.key,d=a.children,l=new Set(n===!0?[]:n),s=[];return function o(v){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return v.map(function(t,g){for(var f,y=P(r?r.pos:"0",g),m=T(t[p],y),h=0;h<c.length;h+=1){var k=c[h];if(t[k]!==void 0){f=t[k];break}}var u=Object.assign(C(t,[].concat(N(c),[p,d])),{title:f,key:m,parent:r,pos:y,children:null,data:t,isStart:[].concat(N(r?r.isStart:[]),[g===0]),isEnd:[].concat(N(r?r.isEnd:[]),[g===v.length-1])});return s.push(u),n===!0||l.has(m)?u.children=o(t[d]||[],u):u.children=[],u})}(e),s},exports.getKey=T,exports.getPosition=P,exports.getTreeNodeProps=function(e,n){var i=n.expandedKeys,a=n.selectedKeys,c=n.loadedKeys,p=n.loadingKeys,d=n.checkedKeys,l=n.halfCheckedKeys,s=n.dragOverNodeKey,o=n.dropPosition,v=n.keyEntities,r=B(v,e);return{eventKey:e,expanded:i.indexOf(e)!==-1,selected:a.indexOf(e)!==-1,loaded:c.indexOf(e)!==-1,loading:p.indexOf(e)!==-1,checked:d.indexOf(e)!==-1,halfChecked:l.indexOf(e)!==-1,pos:String(r?r.pos:""),dragOver:s===e&&o===0,dragOverGapTop:s===e&&o===-1,dragOverGapBottom:s===e&&o===1}},exports.isTreeNode=G,exports.traverseDataNodes=S,exports.warningWithoutKey=function(e,n){var i=new Map;(function a(c){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";(c||[]).forEach(function(d){var l=d[n.key],s=d[n.children];O.warningOnce(l!=null,"Tree node must have a certain key: [".concat(p).concat(l,"]"));var o=String(l);O.warningOnce(!i.has(o)||l==null,"Same 'key' exist in the Tree: ".concat(o)),i.set(o,!0),a(s,"".concat(p).concat(o," > "))})})(e)};
