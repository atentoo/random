"use strict";const s=require("../../@babel/runtime/helpers/esm/extends.cjs"),V=require("../../@babel/runtime/helpers/esm/objectDestructuringEmpty.cjs"),_=require("../../@babel/runtime/helpers/esm/slicedToArray.cjs"),z=require("../../@babel/runtime/helpers/esm/objectWithoutProperties.cjs"),A=require("../../../_virtual/index.cjs"),B=require("../../rc-motion/es/CSSMotion.cjs");require("../../rc-motion/es/CSSMotionList.cjs");const F=require("react"),G=require("../../rc-util/es/hooks/useLayoutEffect.cjs"),H=require("./contextTypes.cjs"),y=require("./TreeNode.cjs"),I=require("./useUnmount.cjs"),J=require("./utils/treeUtil.cjs");function K(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const i in e)if(i!=="default"){const a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>e[i]})}}return n.default=e,Object.freeze(n)}const t=K(F);var L=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],E=t.forwardRef(function(e,n){var i=e.className,a=e.style,g=e.motion,r=e.motionNodes,d=e.motionType,b=e.onMotionStart,M=e.onMotionEnd,l=e.active,O=e.treeNodeRequiredProps,S=z(e,L),T=t.useState(!0),f=_(T,2),m=f[0],j=f[1],P=t.useContext(H.TreeContext).prefixCls,u=r&&d!=="hide";G.default(function(){r&&u!==m&&j(u)},[r]);var p=t.useRef(!1),q=function(){r&&!p.current&&(p.current=!0,M())};return I(function(){r&&b()},q),r?t.createElement(B.default,s({ref:n,visible:m},g,{motionAppear:d==="show",onVisibleChanged:function(c){u===c&&q()}}),function(c,h){var x=c.className,C=c.style;return t.createElement("div",{ref:h,className:A("".concat(P,"-treenode-motion"),x),style:C},r.map(function(o){var N=Object.assign({},(V(o.data),o.data)),R=o.title,v=o.key,D=o.isStart,w=o.isEnd;delete N.children;var k=J.getTreeNodeProps(v,O);return t.createElement(y,s({},N,k,{title:R,active:l,data:o.data,key:v,isStart:D,isEnd:w}))}))}):t.createElement(y,s({domRef:n,className:i,style:a},S,{active:l}))});process.env.NODE_ENV!=="production"&&(E.displayName="MotionTreeNode"),module.exports=E;
