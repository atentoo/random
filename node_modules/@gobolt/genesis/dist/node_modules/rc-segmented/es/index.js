import O from "../../@babel/runtime/helpers/esm/extends.js";
import N from "../../@babel/runtime/helpers/esm/slicedToArray.js";
import re from "../../@babel/runtime/helpers/esm/objectWithoutProperties.js";
import d from "../../@babel/runtime/helpers/esm/defineProperty.js";
import j from "../../@babel/runtime/helpers/esm/objectSpread2.js";
import z from "../../@babel/runtime/helpers/esm/typeof.js";
import E from "../../../_virtual/index.js";
import ie from "../../rc-util/es/hooks/useMergedState.js";
import ce from "../../rc-util/es/omit.js";
import { composeRef as ue } from "../../rc-util/es/ref.js";
import * as a from "react";
import me from "./MotionThumb.js";
var de = ["prefixCls", "direction", "vertical", "options", "disabled", "defaultValue", "value", "name", "onChange", "className", "motionName"];
function se(e) {
  return e.map(function(n) {
    if (z(n) === "object" && n !== null) {
      var c = function(t) {
        return t.title !== void 0 ? t.title : z(t.label) !== "object" ? (i = t.label) === null || i === void 0 ? void 0 : i.toString() : void 0;
        var i;
      }(n);
      return j(j({}, n), {}, { title: c });
    }
    return { label: n == null ? void 0 : n.toString(), title: n == null ? void 0 : n.toString(), value: n };
  });
}
var fe = function(e) {
  var n = e.prefixCls, c = e.className, t = e.disabled, i = e.checked, l = e.label, v = e.title, p = e.value, b = e.name, h = e.onChange, s = e.onFocus, w = e.onBlur, y = e.onKeyDown, C = e.onKeyUp, u = e.onMouseDown;
  return a.createElement("label", { className: E(c, d({}, "".concat(n, "-item-disabled"), t)), onMouseDown: u }, a.createElement("input", { name: b, className: "".concat(n, "-item-input"), type: "radio", disabled: t, checked: i, onChange: function(g) {
    t || h(g, p);
  }, onFocus: s, onBlur: w, onKeyDown: y, onKeyUp: C }), a.createElement("div", { className: "".concat(n, "-item-label"), title: v, "aria-selected": i }, l));
}, L = a.forwardRef(function(e, n) {
  var c, t, i = e.prefixCls, l = i === void 0 ? "rc-segmented" : i, v = e.direction, p = e.vertical, b = e.options, h = b === void 0 ? [] : b, s = e.disabled, w = e.defaultValue, y = e.value, C = e.name, u = e.onChange, g = e.className, T = g === void 0 ? "" : g, S = e.motionName, _ = S === void 0 ? "thumb-motion" : S, q = re(e, de), x = a.useRef(null), G = a.useMemo(function() {
    return ue(x, n);
  }, [x, n]), m = a.useMemo(function() {
    return se(h);
  }, [h]), H = ie((c = m[0]) === null || c === void 0 ? void 0 : c.value, { value: y, defaultValue: w }), K = N(H, 2), f = K[0], M = K[1], J = a.useState(!1), k = N(J, 2), P = k[0], I = k[1], Q = function(o, r) {
    M(r), u == null || u(r);
  }, W = ce(q, ["children"]), X = a.useState(!1), R = N(X, 2), Y = R[0], U = R[1], Z = a.useState(!1), V = N(Z, 2), $ = V[0], A = V[1], ee = function() {
    A(!0);
  }, ne = function() {
    A(!1);
  }, oe = function() {
    U(!1);
  }, te = function(o) {
    o.key === "Tab" && U(!0);
  }, B = function(o) {
    var r = m.findIndex(function(le) {
      return le.value === f;
    }), F = m.length, D = m[(r + o + F) % F];
    D && (M(D.value), u == null || u(D.value));
  }, ae = function(o) {
    switch (o.key) {
      case "ArrowLeft":
      case "ArrowUp":
        B(-1);
        break;
      case "ArrowRight":
      case "ArrowDown":
        B(1);
    }
  };
  return a.createElement("div", O({ role: "radiogroup", "aria-label": "segmented control", tabIndex: s ? void 0 : 0 }, W, { className: E(l, (t = {}, d(t, "".concat(l, "-rtl"), v === "rtl"), d(t, "".concat(l, "-disabled"), s), d(t, "".concat(l, "-vertical"), p), t), T), ref: G }), a.createElement("div", { className: "".concat(l, "-group") }, a.createElement(me, { vertical: p, prefixCls: l, value: f, containerRef: x, motionName: "".concat(l, "-").concat(_), direction: v, getValueIndex: function(o) {
    return m.findIndex(function(r) {
      return r.value === o;
    });
  }, onMotionStart: function() {
    I(!0);
  }, onMotionEnd: function() {
    I(!1);
  } }), m.map(function(o) {
    var r;
    return a.createElement(fe, O({}, o, { name: C, key: o.value, prefixCls: l, className: E(o.className, "".concat(l, "-item"), (r = {}, d(r, "".concat(l, "-item-selected"), o.value === f && !P), d(r, "".concat(l, "-item-focused"), $ && Y && o.value === f), r)), checked: o.value === f, onChange: Q, onFocus: ee, onBlur: ne, onKeyDown: ae, onKeyUp: te, onMouseDown: oe, disabled: !!s || !!o.disabled }));
  })));
});
process.env.NODE_ENV !== "production" && (L.displayName = "Segmented");
var Ee = L;
export {
  Ee as default
};
