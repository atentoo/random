"use strict";const D=require("../../../../../@babel/runtime/helpers/esm/objectSpread2.cjs"),G=require("react");require("../../../../../rc-util/es/hooks/useLayoutEffect.cjs"),require("../../../../../rc-util/es/ref.cjs");const J=require("../../../../../rc-util/es/warning.cjs"),L=require("../../../../../rc-util/es/pickAttrs.cjs"),Q=require("../../../utils/dateUtil.cjs");function U(e){const u=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const o in e)if(o!=="default"){const d=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(u,o,d.get?d:{enumerable:!0,get:()=>e[o]})}}return u.default=e,Object.freeze(u)}const m=U(G);module.exports=function(e,u){var o=e.format,d=e.maskFormat,l=e.generateConfig,s=e.locale,k=e.preserveInvalidOnBlur,w=e.inputReadOnly,x=e.required,j=e["aria-required"],E=e.onSubmit,F=e.onFocus,I=e.onBlur,P=e.onInputChange,g=e.onInvalid,B=e.open,v=e.onOpenChange,b=e.onKeyDown,M=e.onChange,N=e.activeHelp,S=e.name,H=e.autoComplete,V=e.id,h=e.value,_=e.invalid,z=e.placeholder,K=e.disabled,O=e.activeIndex,T=e.allHelp,y=e.picker,R=function(r,n){var a=l.locale.parse(s.locale,r,[n]);return a&&l.isValidate(a)?a:null},c=o[0],p=m.useCallback(function(r){return Q.formatValue(r,{locale:s,format:c,generateConfig:l})},[s,l,c]),q=m.useMemo(function(){return h.map(p)},[h,p]),A=m.useMemo(function(){var r=y==="time"?8:10,n=typeof c=="function"?c(l.getNow()).length:c.length;return Math.max(r,n)+2},[c,y,l]),C=function(r){for(var n=0;n<o.length;n+=1){var a=o[n];if(typeof a=="string"){var i=R(r,a);if(i)return i}}return!1};return[function(r){function n(t){return r!==void 0?t[r]:t}var a=L(e,{aria:!0,data:!0}),i=D(D({},a),{},{format:d,validateFormat:function(t){return!!C(t)},preserveInvalidOnBlur:k,readOnly:w,required:x,"aria-required":j,name:S,autoComplete:H,size:A,id:n(V),value:n(q)||"",invalid:n(_),placeholder:n(z),active:O===r,helped:T||N&&O===r,disabled:n(K),onFocus:function(t){F(t,r)},onBlur:function(t){I(t,r)},onSubmit:E,onChange:function(t){P();var f=C(t);if(f)return g(!1,r),void M(f,r);g(!!t,r)},onHelp:function(){v(!0,{index:r})},onKeyDown:function(t){var f=!1;if(b==null||b(t,function(){process.env.NODE_ENV!=="production"&&J.warningOnce(!1,"`preventDefault` callback is deprecated. Please call `event.preventDefault` directly."),f=!0}),!t.defaultPrevented&&!f)switch(t.key){case"Escape":v(!1,{index:r});break;case"Enter":B||v(!0)}}},u==null?void 0:u({valueTexts:q}));return Object.keys(i).forEach(function(t){i[t]===void 0&&delete i[t]}),i},p]};
