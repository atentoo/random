"use strict";const C=require("../../../../@babel/runtime/helpers/esm/extends.cjs"),v=require("../../../../@babel/runtime/helpers/esm/defineProperty.cjs"),p=require("../../../../@babel/runtime/helpers/esm/objectSpread2.cjs"),B=require("../../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),oe=require("../../../../@babel/runtime/helpers/esm/typeof.cjs"),M=require("../../../../@babel/runtime/helpers/esm/objectWithoutProperties.cjs"),ie=require("../../../../../_virtual/index.cjs"),ue=require("../../../../rc-resize-observer/es/index.cjs"),ce=require("../../../../rc-util/es/hooks/useEvent.cjs");require("../../../../rc-util/es/hooks/useLayoutEffect.cjs");const se=require("react");require("../../../../rc-util/es/ref.cjs"),require("../../../../rc-util/es/warning.cjs");const le=require("../context.cjs"),de=require("./hooks/useInputProps.cjs"),fe=require("./hooks/useRootProps.cjs"),j=require("./Icon.cjs"),k=require("./Input.cjs");function ve(e){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const a in e)if(a!=="default"){const u=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,u.get?u:{enumerable:!0,get:()=>e[a]})}}return i.default=e,Object.freeze(i)}const t=ve(se);var pe=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveInfo","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],me=["index"];function ge(e,i){var a=e.id,u=e.prefix,x=e.clearIcon,A=e.suffixIcon,y=e.separator,z=y===void 0?"~":y,E=e.activeIndex;e.activeHelp,e.allHelp;var K=e.focused;e.onFocus,e.onBlur,e.onKeyDown,e.locale,e.generateConfig;var c=e.placeholder,P=e.className,_=e.style,T=e.onClick,V=e.onClear,h=e.value;e.onChange,e.onSubmit,e.onInputChange,e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid;var s=e.disabled,G=e.invalid;e.inputReadOnly;var J=e.direction;e.onOpenChange;var L=e.onActiveInfo;e.placement;var O=e.onMouseDown;e.required,e["aria-required"];var w=e.autoFocus,R=e.tabIndex,Q=M(e,pe),U=J==="rtl",o=t.useContext(le).prefixCls,W=t.useMemo(function(){if(typeof a=="string")return[a];var n=a||{};return[n.start,n.end]},[a]),m=t.useRef(),g=t.useRef(),q=t.useRef(),l=function(n){var r;return(r=[g,q][n])===null||r===void 0?void 0:r.current};t.useImperativeHandle(i,function(){return{nativeElement:m.current,focus:function(n){if(oe(n)==="object"){var r,d=n||{},f=d.index,b=f===void 0?0:f,ae=M(d,me);(r=l(b))===null||r===void 0||r.focus(ae)}else{var I;(I=l(n??0))===null||I===void 0||I.focus()}},blur:function(){var n,r;(n=l(0))===null||n===void 0||n.blur(),(r=l(1))===null||r===void 0||r.blur()}}});var X=fe(Q),Y=t.useMemo(function(){return Array.isArray(c)?c:[c,c]},[c]),Z=de(p(p({},e),{},{id:W,placeholder:Y})),N=B(Z,1)[0],$=t.useState({position:"absolute",width:0}),D=B($,2),ee=D[0],ne=D[1],F=ce(function(){var n=l(E);if(n){var r=n.nativeElement.getBoundingClientRect(),d=m.current.getBoundingClientRect(),f=r.left-d.left;ne(function(b){return p(p({},b),{},{width:r.width,left:f})}),L([r.left,r.right,d.width])}});t.useEffect(function(){F()},[E]);var re=x&&(h[0]&&!s[0]||h[1]&&!s[1]),S=w&&!s[0],te=w&&!S&&!s[1];return t.createElement(ue,{onResize:F},t.createElement("div",C({},X,{className:ie(o,"".concat(o,"-range"),v(v(v(v({},"".concat(o,"-focused"),K),"".concat(o,"-disabled"),s.every(function(n){return n})),"".concat(o,"-invalid"),G.some(function(n){return n})),"".concat(o,"-rtl"),U),P),style:_,ref:m,onClick:T,onMouseDown:function(n){var r=n.target;r!==g.current.inputElement&&r!==q.current.inputElement&&n.preventDefault(),O==null||O(n)}}),u&&t.createElement("div",{className:"".concat(o,"-prefix")},u),t.createElement(k,C({ref:g},N(0),{autoFocus:S,tabIndex:R,"date-range":"start"})),t.createElement("div",{className:"".concat(o,"-range-separator")},z),t.createElement(k,C({ref:q},N(1),{autoFocus:te,tabIndex:R,"date-range":"end"})),t.createElement("div",{className:"".concat(o,"-active-bar"),style:ee}),t.createElement(j.default,{type:"suffix",icon:A}),re&&t.createElement(j.ClearIcon,{icon:x,onClear:V})))}var H=t.forwardRef(ge);process.env.NODE_ENV!=="production"&&(H.displayName="RangeSelector"),module.exports=H;
