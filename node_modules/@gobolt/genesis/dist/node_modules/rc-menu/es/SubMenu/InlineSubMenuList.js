import N from "../../../@babel/runtime/helpers/esm/extends.js";
import R from "../../../@babel/runtime/helpers/esm/objectSpread2.js";
import S from "../../../@babel/runtime/helpers/esm/slicedToArray.js";
import * as e from "react";
import L from "../../../rc-motion/es/CSSMotion.js";
import "../../../rc-motion/es/CSSMotionList.js";
import { getMotion as k } from "../utils/motionUtil.js";
import V, { MenuContext as j } from "../context/MenuContext.js";
import A from "./SubMenuList.js";
function F(o) {
  var u = o.id, f = o.open, d = o.keyPath, p = o.children, a = "inline", t = e.useContext(j), v = t.prefixCls, h = t.forceSubMenuRender, C = t.motion, b = t.defaultMotions, m = t.mode, r = e.useRef(!1);
  r.current = m === a;
  var M = e.useState(!r.current), l = S(M, 2), g = l[0], c = l[1], x = !!r.current && f;
  e.useEffect(function() {
    r.current && c(!1);
  }, [m]);
  var i = R({}, k(a, C, b));
  d.length > 1 && (i.motionAppear = !1);
  var s = i.onVisibleChanged;
  return i.onVisibleChanged = function(n) {
    return r.current || n || c(!0), s == null ? void 0 : s(n);
  }, g ? null : e.createElement(V, { mode: a, locked: !r.current }, e.createElement(L, N({ visible: x }, i, { forceRender: h, removeOnLeave: !1, leavedClassName: "".concat(v, "-hidden") }), function(n) {
    var E = n.className, y = n.style;
    return e.createElement(A, { id: u, className: E, style: y }, p);
  }));
}
export {
  F as default
};
