import W from "../../../@babel/runtime/helpers/esm/defineProperty.js";
import n from "../../../@babel/runtime/helpers/esm/objectSpread2.js";
import j from "../../../@babel/runtime/helpers/esm/slicedToArray.js";
import * as t from "react";
import k from "../../../@rc-component/trigger/es/index.js";
import q from "../../../../_virtual/index.js";
import c from "../../../rc-util/es/raf.js";
import { MenuContext as w } from "../context/MenuContext.js";
import { placementsRtl as B, placements as F } from "../placements.js";
import { getMotion as U } from "../utils/motionUtil.js";
var _ = { horizontal: "bottomLeft", vertical: "rightTop", "vertical-left": "rightTop", "vertical-right": "leftTop" };
function $(e) {
  var r = e.prefixCls, i = e.visible, g = e.children, C = e.popup, b = e.popupStyle, d = e.popupClassName, a = e.popupOffset, h = e.disabled, p = e.mode, v = e.onVisibleChange, o = t.useContext(w), M = o.getPopupContainer, u = o.rtl, P = o.subMenuOpenDelay, y = o.subMenuCloseDelay, x = o.builtinPlacements, R = o.triggerSubMenuAction, S = o.forceSubMenuRender, D = o.rootClassName, N = o.motion, T = o.defaultMotions, A = t.useState(!1), l = j(A, 2), E = l[0], L = l[1], O = n(n({}, u ? B : F), x), V = _[p], s = U(p, N, T), m = t.useRef(s);
  p !== "inline" && (m.current = s);
  var z = n(n({}, m.current), {}, { leavedClassName: "".concat(r, "-hidden"), removeOnLeave: !1, motionAppear: !0 }), f = t.useRef();
  return t.useEffect(function() {
    return f.current = c(function() {
      L(i);
    }), function() {
      c.cancel(f.current);
    };
  }, [i]), t.createElement(k, { prefixCls: r, popupClassName: q("".concat(r, "-popup"), W({}, "".concat(r, "-rtl"), u), d, D), stretch: p === "horizontal" ? "minWidth" : null, getPopupContainer: M, builtinPlacements: O, popupPlacement: V, popupVisible: E, popup: C, popupStyle: b, popupAlign: a && { offset: a }, action: h ? [] : [R], mouseEnterDelay: P, mouseLeaveDelay: y, onPopupVisibleChange: v, forceRender: S, popupMotion: z, fresh: !0 }, g);
}
export {
  $ as default
};
