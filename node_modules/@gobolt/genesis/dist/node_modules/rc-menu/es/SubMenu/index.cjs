"use strict";const E=require("../../../@babel/runtime/helpers/esm/defineProperty.cjs"),k=require("../../../@babel/runtime/helpers/esm/extends.cjs"),J=require("../../../@babel/runtime/helpers/esm/objectSpread2.cjs"),he=require("../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),Q=require("../../../@babel/runtime/helpers/esm/objectWithoutProperties.cjs"),qe=require("react"),Me=require("../../../../_virtual/index.cjs"),Ie=require("../../../rc-overflow/es/Overflow.cjs"),ge=require("../../../rc-util/es/warning.cjs"),xe=require("./SubMenuList.cjs"),Pe=require("../utils/commonUtil.cjs"),N=require("../context/MenuContext.cjs"),Ne=require("../hooks/useMemoCallback.cjs"),ke=require("./PopupTrigger.cjs"),Se=require("../Icon.cjs"),Oe=require("../hooks/useActive.cjs"),we=require("../utils/warnUtil.cjs"),Ke=require("../hooks/useDirectionStyle.cjs"),Te=require("./InlineSubMenuList.cjs"),m=require("../context/PathContext.cjs"),Re=require("../context/IdContext.cjs"),je=require("../context/PrivateContext.cjs");function De(e){const s=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const a in e)if(a!=="default"){const i=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(s,a,i.get?i:{enumerable:!0,get:()=>e[a]})}}return s.default=e,Object.freeze(s)}const n=De(qe);var Le=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],ze=["active"],_e=n.forwardRef(function(e,s){var a=e.style,i=e.className,f=e.title,t=e.eventKey,v=e.warnKey,d=e.disabled,X=e.internalPopupClose,S=e.children,O=e.itemIcon,w=e.expandIcon,Y=e.popupClassName,Z=e.popupOffset,$=e.popupStyle,K=e.onClick,T=e.onMouseEnter,R=e.onMouseLeave,j=e.onTitleClick,ee=e.onTitleMouseEnter,ne=e.onTitleMouseLeave,te=Q(e,Le),y=Re.useMenuId(t),o=n.useContext(N.MenuContext),re=o.prefixCls,r=o.mode,oe=o.openKeys,ue=o.disabled,C=o.overflowDisabled,D=o.activeKey,le=o.selectedKeys,ae=o.itemIcon,ie=o.expandIcon,ce=o.onItemClick,L=o.onOpenChange,se=o.onActive,z=n.useContext(je)._internalRenderSubMenuItem,b=n.useContext(m.PathUserContext).isSubPathKey,h=m.useFullPath(),l="".concat(re,"-submenu"),c=ue||d,pe=n.useRef(),de=n.useRef();process.env.NODE_ENV!=="production"&&v&&ge.warningOnce(!1,"SubMenu should not leave undefined `key`.");var fe=O??ae,q=w??ie,_=oe.includes(t),p=!C&&_,F=b(le,t),V=Oe(t,c,ee,ne),A=V.active,me=Q(V,ze),ve=n.useState(!1),U=he(ve,2),B=U[0],ye=U[1],G=function(u){c||ye(u)},H=n.useMemo(function(){return A||r!=="inline"&&(B||b([D],t))},[r,A,D,B,t,b]),Ce=Ke(h.length),Ee=Ne(function(u){K==null||K(we.warnItemProp(u)),ce(u)}),M=y&&"".concat(y,"-popup"),be=n.useMemo(function(){return n.createElement(Se,{icon:r!=="horizontal"?q:void 0,props:J(J({},e),{},{isOpen:p,isSubMenu:!0})},n.createElement("i",{className:"".concat(l,"-arrow")}))},[r,q,e,p,l]),I=n.createElement("div",k({role:"menuitem",style:Ce,className:"".concat(l,"-title"),tabIndex:c?null:-1,ref:pe,title:typeof f=="string"?f:null,"data-menu-id":C&&y?null:y,"aria-expanded":p,"aria-haspopup":!0,"aria-controls":M,"aria-disabled":c,onClick:function(u){c||(j==null||j({key:t,domEvent:u}),r==="inline"&&L(t,!_))},onFocus:function(){se(t)}},me),f,be),g=n.useRef(r);if(r!=="inline"&&h.length>1?g.current="vertical":g.current=r,!C){var x=g.current;I=n.createElement(ke,{mode:x,prefixCls:l,visible:!X&&p&&r!=="inline",popupClassName:Y,popupOffset:Z,popupStyle:$,popup:n.createElement(N.default,{mode:x==="horizontal"?"vertical":x},n.createElement(xe,{id:M,ref:de},S)),disabled:c,onVisibleChange:function(u){r!=="inline"&&L(t,u)}},I)}var P=n.createElement(Ie.default.Item,k({ref:s,role:"none"},te,{component:"li",style:a,className:Me(l,"".concat(l,"-").concat(r),i,E(E(E(E({},"".concat(l,"-open"),p),"".concat(l,"-active"),H),"".concat(l,"-selected"),F),"".concat(l,"-disabled"),c)),onMouseEnter:function(u){G(!0),T==null||T({key:t,domEvent:u})},onMouseLeave:function(u){G(!1),R==null||R({key:t,domEvent:u})}}),I,!C&&n.createElement(Te,{id:M,open:p,keyPath:h},S));return z&&(P=z(P,e,{selected:F,active:H,open:p,disabled:c})),n.createElement(N.default,{onItemClick:Ee,mode:r==="horizontal"?"vertical":r,itemIcon:fe,expandIcon:q},P)}),W=n.forwardRef(function(e,s){var a,i=e.eventKey,f=e.children,t=m.useFullPath(i),v=Pe.parseChildren(f,t),d=m.useMeasure();return n.useEffect(function(){if(d)return d.registerPath(i,t),function(){d.unregisterPath(i,t)}},[t]),a=d?v:n.createElement(_e,k({ref:s},e),v),n.createElement(m.PathTrackerContext.Provider,{value:t},a)});process.env.NODE_ENV!=="production"&&(W.displayName="SubMenu"),module.exports=W;
