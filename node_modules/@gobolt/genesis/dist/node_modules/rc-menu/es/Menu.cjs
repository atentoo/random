"use strict";const Un=require("../../@babel/runtime/helpers/esm/extends.cjs"),we=require("../../@babel/runtime/helpers/esm/defineProperty.cjs"),Re=require("../../@babel/runtime/helpers/esm/objectSpread2.cjs"),Hn=require("../../@babel/runtime/helpers/esm/toConsumableArray.cjs"),u=require("../../@babel/runtime/helpers/esm/slicedToArray.cjs"),Wn=require("../../@babel/runtime/helpers/esm/objectWithoutProperties.cjs"),Yn=require("../../../_virtual/index.cjs"),V=require("../../rc-overflow/es/Overflow.cjs"),j=require("../../rc-util/es/hooks/useMergedState.cjs"),Bn=require("../../rc-util/es/isEqual.cjs"),Gn=require("../../rc-util/es/warning.cjs"),ke=require("react"),Jn=require("react-dom"),Qn=require("./context/IdContext.cjs"),Ne=require("./context/MenuContext.cjs"),De=require("./context/PathContext.cjs"),Xn=require("./context/PrivateContext.cjs"),z=require("./hooks/useAccessibility.cjs"),xe=require("./hooks/useKeyRecords.cjs"),K=require("./hooks/useMemoCallback.cjs"),Zn=require("./hooks/useUUID.cjs"),$n=require("./MenuItem.cjs"),et=require("./SubMenu/index.cjs"),Ae=require("./utils/nodeUtil.cjs"),nt=require("./utils/warnUtil.cjs");function tt(f){const y=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(f){for(const a in f)if(a!=="default"){const e=Object.getOwnPropertyDescriptor(f,a);Object.defineProperty(y,a,e.get?e:{enumerable:!0,get:()=>f[a]})}}return y.default=f,Object.freeze(y)}const t=tt(ke);var rt=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],v=[],it=t.forwardRef(function(f,y){var a,e=f,F=e.prefixCls,l=F===void 0?"rc-menu":F,L=e.rootClassName,_e=e.style,Te=e.className,U=e.tabIndex,Ve=U===void 0?0:U,q=e.items,E=e.children,H=e.direction,W=e.id,Y=e.mode,b=Y===void 0?"vertical":Y,O=e.inlineCollapsed,je=e.disabled,w=e.disabledOverflow,B=e.subMenuOpenDelay,ze=B===void 0?.1:B,G=e.subMenuCloseDelay,Fe=G===void 0?.1:G,Le=e.forceSubMenuRender,Ue=e.defaultOpenKeys,He=e.openKeys,J=e.activeKey,We=e.defaultActiveFirst,Q=e.selectable,Ye=Q===void 0||Q,X=e.multiple,Z=X!==void 0&&X,Be=e.defaultSelectedKeys,Ge=e.selectedKeys,$=e.onSelect,ee=e.onDeselect,ne=e.inlineIndent,Je=ne===void 0?24:ne,Qe=e.motion,Xe=e.defaultMotions,te=e.triggerSubMenuAction,Ze=te===void 0?"hover":te,$e=e.builtinPlacements,en=e.itemIcon,nn=e.expandIcon,re=e.overflowedIndicator,tn=re===void 0?"...":re,rn=e.overflowedIndicatorPopupClassName,on=e.getPopupContainer,ie=e.onClick,oe=e.onOpenChange,un=e.onKeyDown,ln=e.openAnimation,an=e.openTransitionName,ue=e._internalRenderMenuItem,le=e._internalRenderSubMenuItem,ae=e._internalComponents,sn=Wn(e,rt),cn=t.useMemo(function(){return[Ae.parseItems(E,q,v,ae,l),Ae.parseItems(E,q,v,{},l)]},[E,q,ae]),se=u(cn,2),m=se[0],dn=se[1],fn=t.useState(!1),ce=u(fn,2),de=ce[0],mn=ce[1],g=t.useRef(),R=Zn(W),N=H==="rtl";process.env.NODE_ENV!=="production"&&Gn.warningOnce(!ln&&!an,"`openAnimation` and `openTransitionName` is removed. Please use `motion` or `defaultMotion` instead.");var pn=j(Ue,{value:He,postState:function(n){return n||v}}),fe=u(pn,2),s=fe[0],me=fe[1],D=function(n){function r(){me(n),oe==null||oe(n)}arguments.length>1&&arguments[1]!==void 0&&arguments[1]?Jn.flushSync(r):r()},vn=t.useState(s),pe=u(vn,2),yn=pe[0],bn=pe[1],x=t.useRef(!1),gn=t.useMemo(function(){return b!=="inline"&&b!=="vertical"||!O?[b,!1]:["vertical",O]},[b,O]),ve=u(gn,2),C=ve[0],A=ve[1],ye=C==="inline",Cn=t.useState(C),be=u(Cn,2),c=be[0],In=be[1],hn=t.useState(A),ge=u(hn,2),Mn=ge[0],Pn=ge[1];t.useEffect(function(){In(C),Pn(A),x.current&&(ye?me(yn):D(v))},[C,A]);var Sn=t.useState(0),Ce=u(Sn,2),I=Ce[0],Kn=Ce[1],k=I>=m.length-1||c!=="horizontal"||w;t.useEffect(function(){ye&&bn(s)},[s]),t.useEffect(function(){return x.current=!0,function(){x.current=!1}},[]);var p=xe.default(),Ie=p.registerPath,he=p.unregisterPath,qn=p.refreshOverflowKeys,Me=p.isSubPathKey,En=p.getKeyPath,Pe=p.getKeys,On=p.getSubPathKeys,wn=t.useMemo(function(){return{registerPath:Ie,unregisterPath:he}},[Ie,he]),Rn=t.useMemo(function(){return{isSubPathKey:Me}},[Me]);t.useEffect(function(){qn(k?v:m.slice(I+1).map(function(n){return n.key}))},[I,k]);var Nn=j(J||We&&((a=m[0])===null||a===void 0?void 0:a.key),{value:J}),Se=u(Nn,2),h=Se[0],_=Se[1],Dn=K(function(n){_(n)}),xn=K(function(){_(void 0)});ke.useImperativeHandle(y,function(){return{list:g.current,focus:function(n){var r,i,d=Pe(),o=z.refreshElements(d,R),P=o.elements,T=o.key2element,Fn=o.element2key,Ee=z.getFocusableElements(g.current,P),Oe=h??(Ee[0]?Fn.get(Ee[0]):(r=m.find(function(Ln){return!Ln.props.disabled}))===null||r===void 0?void 0:r.key),S=T.get(Oe);Oe&&S&&(S==null||(i=S.focus)===null||i===void 0||i.call(S,n))}}});var An=j(Be||[],{value:Ge,postState:function(n){return Array.isArray(n)?n:n==null?v:[n]}}),Ke=u(An,2),M=Ke[0],kn=Ke[1],_n=K(function(n){ie==null||ie(nt.warnItemProp(n)),function(r){if(Ye){var i,d=r.key,o=M.includes(d);i=Z?o?M.filter(function(T){return T!==d}):[].concat(Hn(M),[d]):[d],kn(i);var P=Re(Re({},r),{},{selectedKeys:i});o?ee==null||ee(P):$==null||$(P)}!Z&&s.length&&c!=="inline"&&D(v)}(n)}),qe=K(function(n,r){var i=s.filter(function(o){return o!==n});if(r)i.push(n);else if(c!=="inline"){var d=On(n);i=i.filter(function(o){return!d.has(o)})}Bn(s,i,!0)||D(i,!0)}),Tn=z.useAccessibility(c,h,N,R,g,Pe,En,_,function(n,r){var i=r??!s.includes(n);qe(n,i)},un);t.useEffect(function(){mn(!0)},[]);var Vn=t.useMemo(function(){return{_internalRenderMenuItem:ue,_internalRenderSubMenuItem:le}},[ue,le]),jn=c!=="horizontal"||w?m:m.map(function(n,r){return t.createElement(Ne.default,{key:n.key,overflowDisabled:r>I},n)}),zn=t.createElement(V.default,Un({id:W,ref:g,prefixCls:"".concat(l,"-overflow"),component:"ul",itemComponent:$n,className:Yn(l,"".concat(l,"-root"),"".concat(l,"-").concat(c),Te,we(we({},"".concat(l,"-inline-collapsed"),Mn),"".concat(l,"-rtl"),N),L),dir:H,style:_e,role:"menu",tabIndex:Ve,data:jn,renderRawItem:function(n){return n},renderRawRest:function(n){var r=n.length,i=r?m.slice(-r):null;return t.createElement(et,{eventKey:xe.OVERFLOW_KEY,title:tn,disabled:k,internalPopupClose:r===0,popupClassName:rn},i)},maxCount:c!=="horizontal"||w?V.default.INVALIDATE:V.default.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(n){Kn(n)},onKeyDown:Tn},sn));return t.createElement(Xn.Provider,{value:Vn},t.createElement(Qn.IdContext.Provider,{value:R},t.createElement(Ne.default,{prefixCls:l,rootClassName:L,mode:c,openKeys:s,rtl:N,disabled:je,motion:de?Qe:null,defaultMotions:de?Xe:null,activeKey:h,onActive:Dn,onInactive:xn,selectedKeys:M,inlineIndent:Je,subMenuOpenDelay:ze,subMenuCloseDelay:Fe,forceSubMenuRender:Le,builtinPlacements:$e,triggerSubMenuAction:Ze,getPopupContainer:on,itemIcon:en,expandIcon:nn,onItemClick:_n,onOpenChange:qe},t.createElement(De.PathUserContext.Provider,{value:Rn},zn),t.createElement("div",{style:{display:"none"},"aria-hidden":!0},t.createElement(De.PathRegisterContext.Provider,{value:wn},dn)))))});module.exports=it;
