"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const L=require("../../@babel/runtime/helpers/esm/extends.cjs"),h=require("../../@babel/runtime/helpers/esm/objectWithoutProperties.cjs"),S=require("../../@babel/runtime/helpers/esm/objectSpread2.cjs"),P=require("../../@babel/runtime/helpers/esm/classCallCheck.cjs"),_=require("../../@babel/runtime/helpers/esm/createClass.cjs"),T=require("../../@babel/runtime/helpers/esm/assertThisInitialized.cjs"),C=require("../../@babel/runtime/helpers/esm/inherits.cjs"),R=require("../../@babel/runtime/helpers/esm/createSuper.cjs"),A=require("../../@babel/runtime/helpers/esm/defineProperty.cjs"),V=require("react"),U=require("./CSSMotion.cjs"),i=require("./util/diff.cjs"),j=require("./util/motion.cjs");function K(u){const c=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(u){for(const a in u)if(a!=="default"){const m=Object.getOwnPropertyDescriptor(u,a);Object.defineProperty(c,a,m.get?m:{enumerable:!0,get:()=>u[a]})}}return c.default=u,Object.freeze(c)}const E=K(V);var N=["component","children","onVisibleChanged","onAllRemoved"],w=["status"],F=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function q(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:U.default,a=function(m){C(v,m);var k=R(v);function v(){var e;P(this,v);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return e=k.call.apply(k,[this].concat(n)),A(T(e),"state",{keyEntities:[]}),A(T(e),"removeKey",function(p){e.setState(function(o){return{keyEntities:o.keyEntities.map(function(t){return t.key!==p?t:S(S({},t),{},{status:i.STATUS_REMOVED})})}},function(){e.state.keyEntities.filter(function(o){return o.status!==i.STATUS_REMOVED}).length===0&&e.props.onAllRemoved&&e.props.onAllRemoved()})}),e}return _(v,[{key:"render",value:function(){var e=this,s=this.state.keyEntities,n=this.props,r=n.component,p=n.children,o=n.onVisibleChanged;n.onAllRemoved;var t=h(n,N),g=r||E.Fragment,f={};return F.forEach(function(l){f[l]=t[l],delete t[l]}),delete t.keys,E.createElement(g,t,s.map(function(l,O){var b=l.status,d=h(l,w),M=b===i.STATUS_ADD||b===i.STATUS_KEEP;return E.createElement(c,L({},f,{key:d.key,visible:M,eventProps:d,onVisibleChanged:function(y){o==null||o(y,{key:d.key}),y||e.removeKey(d.key)}}),function(y,D){return p(S(S({},y),{},{index:O}),D)})}))}}],[{key:"getDerivedStateFromProps",value:function(e,s){var n=e.keys,r=s.keyEntities,p=i.parseKeys(n);return{keyEntities:i.diffKeys(r,p).filter(function(o){var t=r.find(function(g){var f=g.key;return o.key===f});return!t||t.status!==i.STATUS_REMOVED||o.status!==i.STATUS_REMOVE})}}}]),v}(E.Component);return A(a,"defaultProps",{component:"div"}),a}const x=q(j.supportTransition);exports.default=x,exports.genCSSMotionList=q;
