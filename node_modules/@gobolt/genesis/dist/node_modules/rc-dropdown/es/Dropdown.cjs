"use strict";const Q=require("../../@babel/runtime/helpers/esm/extends.cjs"),U=require("../../@babel/runtime/helpers/esm/defineProperty.cjs"),X=require("../../@babel/runtime/helpers/esm/slicedToArray.cjs"),Y=require("../../@babel/runtime/helpers/esm/objectWithoutProperties.cjs"),_=require("../../@rc-component/trigger/es/index.cjs"),E=require("../../../_virtual/index.cjs"),p=require("../../rc-util/es/ref.cjs"),i=require("react"),Z=require("./hooks/useAccessibility.cjs"),$=require("./Overlay.cjs"),ee=require("./placements.cjs");var ie=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function oe(e,M){var t,s=e.arrow,c=s!==void 0&&s,v=e.prefixCls,o=v===void 0?"rc-dropdown":v,O=e.transitionName,S=e.animation,k=e.align,f=e.placement,F=f===void 0?"bottomLeft":f,d=e.placements,T=d===void 0?ee:d,W=e.getPopupContainer,D=e.showAction,H=e.hideAction,I=e.overlayClassName,L=e.overlayStyle,j=e.visible,g=e.trigger,h=g===void 0?["hover"]:g,z=e.autoFocus,C=e.overlay,n=e.children,y=e.onVisibleChange,B=Y(e,ie),G=i.useState(),b=X(G,2),J=b[0],q=b[1],a="visible"in e?j:J,w=i.useRef(null),N=i.useRef(null),R=i.useRef(null);i.useImperativeHandle(M,function(){return w.current});var A=function(r){q(r),y==null||y(r)};Z({visible:a,triggerRef:R,onVisibleChange:A,autoFocus:z,overlayRef:N});var l,P,x,V=function(){return i.createElement($,{ref:N,overlay:C,prefixCls:o,arrow:c})},K=i.cloneElement(n,{className:E((t=n.props)===null||t===void 0?void 0:t.className,a&&(l=e.openClassName,l!==void 0?l:"".concat(o,"-open"))),ref:p.supportRef(n)?p.composeRef(R,p.getNodeRef(n)):void 0}),u=H;return u||h.indexOf("contextMenu")===-1||(u=["click"]),i.createElement(_.default,Q({builtinPlacements:T},B,{prefixCls:o,ref:w,popupClassName:E(I,U({},"".concat(o,"-show-arrow"),c)),popupStyle:L,action:h,showAction:D,hideAction:u,popupPlacement:F,popupAlign:k,popupTransitionName:O,popupAnimation:S,popupVisible:a,stretch:(P=e.minOverlayWidthMatchTrigger,x=e.alignPoint,("minOverlayWidthMatchTrigger"in e?P:!x)?"minWidth":""),popup:typeof C=="function"?V:V(),onPopupVisibleChange:A,onPopupClick:function(r){var m=e.onOverlayClick;q(!1),m&&m(r)},getPopupContainer:W}),K)}const ne=i.forwardRef(oe);module.exports=ne;
