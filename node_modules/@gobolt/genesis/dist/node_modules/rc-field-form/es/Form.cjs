"use strict";const B=require("../../@babel/runtime/helpers/esm/extends.cjs"),o=require("../../@babel/runtime/helpers/esm/objectSpread2.cjs"),L=require("../../@babel/runtime/helpers/esm/slicedToArray.cjs"),U=require("../../@babel/runtime/helpers/esm/objectWithoutProperties.cjs"),W=require("react"),G=require("./useForm.cjs"),P=require("./FieldContext.cjs"),J=require("./FormContext.cjs"),Q=require("./utils/valueUtil.cjs"),X=require("./ListContext.cjs");function Y(e){const l=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const a in e)if(a!=="default"){const c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(l,a,c.get?c:{enumerable:!0,get:()=>e[a]})}}return l.default=e,Object.freeze(l)}const n=Y(W);var Z=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"];module.exports=function(e,l){var a=e.name,c=e.initialValues,f=e.fields,R=e.form,S=e.preserve,d=e.children,h=e.component,p=h===void 0?"form":h,j=e.validateMessages,b=e.validateTrigger,q=b===void 0?"onChange":b,T=e.onValuesChange,C=e.onFieldsChange,y=e.onFinish,H=e.onFinishFailed,I=e.clearOnDestroy,v=U(e,Z),O=n.useRef(null),u=n.useContext(J.default),k=G.default(R),r=L(k,1)[0],s=r.getInternalHooks(P.HOOK_MARK),w=s.useSubscribe,x=s.setInitialValues,A=s.setCallbacks,K=s.setValidateMessages,_=s.setPreserve,z=s.destroyForm;n.useImperativeHandle(l,function(){return o(o({},r),{},{nativeElement:O.current})}),n.useEffect(function(){return u.registerForm(a,r),function(){u.unregisterForm(a)}},[u,r,a]),K(o(o({},u.validateMessages),j)),A({onValuesChange:T,onFieldsChange:function(t){if(u.triggerFormChange(a,t),C){for(var i=arguments.length,D=new Array(i>1?i-1:0),g=1;g<i;g++)D[g-1]=arguments[g];C.apply(void 0,[t].concat(D))}},onFinish:function(t){u.triggerFormFinish(a,t),y&&y(t)},onFinishFailed:H}),_(S);var m,F=n.useRef(null);x(c,!F.current),F.current||(F.current=!0),n.useEffect(function(){return function(){return z(I)}},[]);var V=typeof d=="function";V?m=d(r.getFieldsValue(!0),r):m=d,w(!V);var E=n.useRef();n.useEffect(function(){Q.isSimilar(E.current||[],f||[])||r.setFields(f||[]),E.current=f},[f,r]);var N=n.useMemo(function(){return o(o({},r),{},{validateTrigger:q})},[r,q]),M=n.createElement(X.Provider,{value:null},n.createElement(P.default.Provider,{value:N},m));return p===!1?M:n.createElement(p,B({},v,{ref:O,onSubmit:function(t){t.preventDefault(),t.stopPropagation(),r.submit()},onReset:function(t){var i;t.preventDefault(),r.resetFields(),(i=v.onReset)===null||i===void 0||i.call(v,t)}}),M)};
