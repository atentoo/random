import I from "../../../rc-util/es/hooks/useLayoutEffect.js";
import { useRef as n } from "react";
var b = 14 / 15;
function Y(h, l, f) {
  var c, u = n(!1), i = n(0), v = n(0), t = n(null), o = n(null), d = function(e) {
    if (u.current) {
      var m = Math.ceil(e.touches[0].pageX), E = Math.ceil(e.touches[0].pageY), a = i.current - m, s = v.current - E, r = Math.abs(a) > Math.abs(s);
      r ? i.current = m : v.current = E;
      var g = f(r, r ? a : s, !1, e);
      g && e.preventDefault(), clearInterval(o.current), g && (o.current = setInterval(function() {
        r ? a *= b : s *= b;
        var L = Math.floor(r ? a : s);
        (!f(r, L, !0) || Math.abs(L) <= 0.1) && clearInterval(o.current);
      }, 16));
    }
  }, p = function() {
    u.current = !1, c();
  }, M = function(e) {
    c(), e.touches.length !== 1 || u.current || (u.current = !0, i.current = Math.ceil(e.touches[0].pageX), v.current = Math.ceil(e.touches[0].pageY), t.current = e.target, t.current.addEventListener("touchmove", d, { passive: !1 }), t.current.addEventListener("touchend", p, { passive: !0 }));
  };
  c = function() {
    t.current && (t.current.removeEventListener("touchmove", d), t.current.removeEventListener("touchend", p));
  }, I(function() {
    return h && l.current.addEventListener("touchstart", M, { passive: !0 }), function() {
      var e;
      (e = l.current) === null || e === void 0 || e.removeEventListener("touchstart", M), c(), clearInterval(o.current);
    };
  }, [h]);
}
export {
  Y as default
};
