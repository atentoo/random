import f from "../../../../@babel/runtime/helpers/esm/slicedToArray.js";
import A from "../../../../@babel/runtime/helpers/esm/toConsumableArray.js";
import { removeCSS as x, updateCSS as y } from "../../../../rc-util/es/Dom/dynamicCSS.js";
import { useContext as R } from "react";
import h, { ATTR_MARK as C, CSS_IN_JS_INSTANCE as g, ATTR_TOKEN as I } from "../StyleContext.js";
import { isClientSide as N, toStyleStr as q } from "../util/index.js";
import { transformToken as E } from "../util/css-variables.js";
import K from "./useGlobalCache.js";
import { uniqueHash as V } from "./useStyleRegister.js";
var b = "cssVar", w = function(r, d) {
  var t = r.key, a = r.prefix, s = r.unitless, m = r.ignore, S = r.token, p = r.scope, u = p === void 0 ? "" : p, v = R(h), T = v.cache.instanceId, _ = v.container, k = S._tokenKey, l = [].concat(A(r.path), [t, u, k]);
  return K(b, l, function() {
    var o = d(), e = E(o, t, { prefix: a, unitless: s, ignore: m, scope: u }), i = f(e, 2), c = i[0], n = i[1];
    return [c, n, V(l, n), t];
  }, function(o) {
    var e = f(o, 3)[2];
    N && x(e, { mark: C });
  }, function(o) {
    var e = f(o, 3), i = e[1], c = e[2];
    if (i) {
      var n = y(i, c, { mark: C, prepend: "queue", attachTo: _, priority: -999 });
      n[g] = T, n.setAttribute(I, t);
    }
  });
}, z = function(r, d, t) {
  var a = f(r, 4), s = a[1], m = a[2], S = a[3], p = (t || {}).plain;
  if (!s) return null;
  var u = { "data-rc-order": "prependQueue", "data-rc-priority": "".concat(-999) };
  return [-999, m, q(s, S, m, u, p)];
};
export {
  b as CSS_VAR_PREFIX,
  w as default,
  z as extract
};
