"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const S=require("../../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),M=require("../../../../@babel/runtime/helpers/esm/toConsumableArray.cjs"),h=require("../../../../@babel/runtime/helpers/esm/objectSpread2.cjs"),E=require("../../../../@emotion/hash/dist/hash.browser.esm.cjs"),D=require("../../../../rc-util/es/Dom/dynamicCSS.cjs"),J=require("react"),y=require("../StyleContext.cjs"),d=require("../util/index.cjs"),P=require("../util/css-variables.cjs"),V=require("./useGlobalCache.cjs");var w={},F=process.env.NODE_ENV!=="production"?"css-dev-only-do-not-override":"css",v=new Map;function Q(a,l){v.set(a,(v.get(a)||0)-1);var t=Array.from(v.keys()),r=t.filter(function(n){return(v.get(n)||0)<=0});t.length-r.length>0&&r.forEach(function(n){(function(i,f){typeof document<"u"&&document.querySelectorAll("style[".concat(y.ATTR_TOKEN,'="').concat(i,'"]')).forEach(function(u){var c;u[y.CSS_IN_JS_INSTANCE]===f&&((c=u.parentNode)===null||c===void 0||c.removeChild(u))})})(n,l),v.delete(n)})}var b=function(a,l,t,r){var n=t.getDerivativeToken(a),i=h(h({},n),l);return r&&(i=r(i)),i},I="token";exports.TOKEN_PREFIX=I,exports.default=function(a,l){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=J.useContext(y.default),n=r.cache.instanceId,i=r.container,f=t.salt,u=f===void 0?"":f,c=t.override,T=c===void 0?w:c,O=t.formatToken,q=t.getComputedToken,e=t.cssVar,p=d.memoResult(function(){return Object.assign.apply(Object,[{}].concat(M(l)))},l),R=d.flattenToken(p),x=d.flattenToken(T),j=e?d.flattenToken(e):"";return V(I,[u,a.id,R,x,j],function(){var s,o=q?q(p,T,a):b(p,T,a,O),k=h({},o),m="";if(e){var _=P.transformToken(o,e.key,{prefix:e.prefix,ignore:e.ignore,unitless:e.unitless,preserve:e.preserve}),N=S(_,2);o=N[0],m=N[1]}var g=d.token2key(o,u);o._tokenKey=g,k._tokenKey=d.token2key(k,u);var K=(s=e==null?void 0:e.key)!==null&&s!==void 0?s:g;o._themeKey=K,function(A){v.set(A,(v.get(A)||0)+1)}(K);var C="".concat(F,"-").concat(E(g));return o._hashId=C,[o,C,k,m,(e==null?void 0:e.key)||""]},function(s){Q(s[0]._themeKey,n)},function(s){var o=S(s,4),k=o[0],m=o[3];if(e&&m){var _=D.updateCSS(m,E("css-variables-".concat(k._themeKey)),{mark:y.ATTR_MARK,prepend:"queue",attachTo:i,priority:-999});_[y.CSS_IN_JS_INSTANCE]=n,_.setAttribute(y.ATTR_TOKEN,k._themeKey)}})},exports.extract=function(a,l,t){var r=S(a,5),n=r[2],i=r[3],f=r[4],u=(t||{}).plain;if(!i)return null;var c=n._tokenKey,T={"data-rc-order":"prependQueue","data-rc-priority":"".concat(-999)};return[-999,c,d.toStyleStr(i,f,c,T,u)]},exports.getComputedToken=b;
