import $ from "../../../../@babel/runtime/helpers/esm/typeof.js";
import U from "../../../../@babel/runtime/helpers/esm/slicedToArray.js";
import rr from "../../../../@babel/runtime/helpers/esm/defineProperty.js";
import l from "../../../../@babel/runtime/helpers/esm/objectSpread2.js";
import F from "react";
import "../../../cssinjs/es/extractStyle.js";
import "../../../cssinjs/es/hooks/useCacheToken.js";
import er from "../../../cssinjs/es/hooks/useCSSVarRegister.js";
import J from "../../../cssinjs/es/hooks/useStyleRegister.js";
import "../../../../rc-util/es/warning.js";
import "../../../cssinjs/es/StyleContext.js";
import "../../../cssinjs/es/theme/createTheme.js";
import "../../../cssinjs/es/theme/ThemeCache.js";
import "../../../cssinjs/es/transformers/legacyLogicalProperties.js";
import { token2CSSVar as R } from "../../../cssinjs/es/util/css-variables.js";
import tr from "./calc/index.js";
import K from "./getCompVarPrefix.js";
import L from "./getComponentToken.js";
import M from "./getDefaultComponentToken.js";
import nr from "./maxmin.js";
import or, { merge as ir } from "./statistic.js";
import ar from "../_util/hooks/useUniqueMemo.js";
import sr from "../hooks/useCSP.js";
function Ir(d) {
  var _ = d.useCSP, Q = _ === void 0 ? sr : _, A = d.useToken, W = d.usePrefix, w = d.getResetStyles, D = d.getCommonStyle, q = d.getCompUnitless;
  function I(e, P, x) {
    var t = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {}, f = Array.isArray(e) ? e : [e, e], n = U(f, 1)[0], y = f.join("-"), k = d.layer || { name: "antd" };
    return function(c) {
      var V = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : c, v = A(), H = v.theme, r = v.realToken, m = v.hashId, i = v.token, o = v.cssVar, g = W(), u = g.rootPrefixCls, j = g.iconPrefixCls, b = Q(), E = o ? "css" : "js", N = ar(function() {
        var a = /* @__PURE__ */ new Set();
        return o && Object.keys(t.unitless || {}).forEach(function(h) {
          a.add(R(h, o.prefix)), a.add(R(h, K(n, o.prefix)));
        }), tr(E, a);
      }, [E, n, o == null ? void 0 : o.prefix]), C = nr(E), p = C.max, S = C.min, O = { theme: H, token: i, hashId: m, nonce: function() {
        return b.nonce;
      }, clientOnly: t.clientOnly, layer: k, order: t.order || -999 };
      return typeof w == "function" && J(l(l({}, O), {}, { clientOnly: !1, path: ["Shared", u] }), function() {
        return w(i, { prefix: { rootPrefixCls: u, iconPrefixCls: j }, csp: b });
      }), [J(l(l({}, O), {}, { path: [y, c, j] }), function() {
        if (t.injectStyle === !1) return [];
        var a = or(i), h = a.token, T = a.flush, s = M(n, r, x), X = ".".concat(c), z = L(n, r, s, { deprecatedTokens: t.deprecatedTokens });
        o && s && $(s) === "object" && Object.keys(s).forEach(function(G) {
          s[G] = "var(".concat(R(G, K(n, o.prefix)), ")");
        });
        var B = ir(h, { componentCls: X, prefixCls: c, iconCls: ".".concat(j), antCls: ".".concat(u), calc: N, max: p, min: S }, o ? s : z), Y = P(B, { hashId: m, prefixCls: c, rootPrefixCls: u, iconPrefixCls: j });
        T(n, z);
        var Z = typeof D == "function" ? D(B, c, V, t.resetFont) : null;
        return [t.resetStyle === !1 ? null : Z, Y];
      }), m];
    };
  }
  return { genStyleHooks: function(e, P, x, t) {
    var f = Array.isArray(e) ? e[0] : e;
    function n(r) {
      return "".concat(String(f)).concat(r.slice(0, 1).toUpperCase()).concat(r.slice(1));
    }
    var y = (t == null ? void 0 : t.unitless) || {}, k = typeof q == "function" ? q(e) : {}, c = l(l({}, k), {}, rr({}, n("zIndexPopup"), !0));
    Object.keys(y).forEach(function(r) {
      c[n(r)] = y[r];
    });
    var V = l(l({}, t), {}, { unitless: c, prefixToken: n }), v = I(e, P, x, V), H = function(r, m, i) {
      var o = i.unitless, g = i.injectStyle, u = g === void 0 || g, j = i.prefixToken, b = i.ignore, E = function(C) {
        var p = C.rootCls, S = C.cssVar, O = S === void 0 ? {} : S, a = A().realToken;
        return er({ path: [r], prefix: O.prefix, key: O.key, unitless: o, ignore: b, token: a, scope: p }, function() {
          var h = M(r, a, m), T = L(r, a, h, { deprecatedTokens: i == null ? void 0 : i.deprecatedTokens });
          return Object.keys(h).forEach(function(s) {
            T[j(s)] = T[s], delete T[s];
          }), T;
        }), null;
      }, N = function(C) {
        var p = A().cssVar;
        return [function(S) {
          return u && p ? F.createElement(F.Fragment, null, F.createElement(E, { rootCls: C, cssVar: p, component: r }), S) : S;
        }, p == null ? void 0 : p.key];
      };
      return N;
    }(f, x, V);
    return function(r) {
      var m = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : r, i = v(r, m), o = U(i, 2)[1], g = H(m), u = U(g, 2);
      return [u[0], o, u[1]];
    };
  }, genSubStyleComponent: function(e, P, x) {
    var t = I(e, P, x, l({ resetStyle: !1, order: -998 }, arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {})), f = function(n) {
      var y = n.prefixCls, k = n.rootCls;
      return t(y, k === void 0 ? y : k), null;
    };
    return process.env.NODE_ENV !== "production" && (f.displayName = "SubStyle_".concat(String(Array.isArray(e) ? e.join(".") : e))), f;
  }, genComponentStyleHook: I };
}
export {
  Ir as default
};
