"use strict";const ce=require("../../../@babel/runtime/helpers/esm/defineProperty.cjs"),M=require("../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),C=require("react"),ue=require("../../../../_virtual/index.cjs"),le=require("../../../rc-util/es/pickAttrs.cjs"),ie=require("../../../rc-overflow/es/Overflow.cjs"),se=require("../TransBtn.cjs"),pe=require("./Input.cjs"),de=require("../hooks/useLayoutEffect.cjs"),fe=require("../utils/commonUtil.cjs");function ve(e){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const c in e)if(c!=="default"){const l=Object.getOwnPropertyDescriptor(e,c);Object.defineProperty(a,c,l.get?l:{enumerable:!0,get:()=>e[c]})}}return a.default=e,Object.freeze(a)}const o=ve(C);function ge(e){var a;return(a=e.key)!==null&&a!==void 0?a:e.value}var R=function(e){e.preventDefault(),e.stopPropagation()};module.exports=function(e){var a=e.id,c=e.prefixCls,l=e.values,d=e.open,O=e.searchValue,y=e.autoClearSearchValue,j=e.inputRef,K=e.placeholder,I=e.disabled,f=e.mode,z=e.showSearch,B=e.autoFocus,F=e.autoComplete,k=e.activeDescendantId,V=e.tabIndex,L=e.removeIcon,W=e.maxTagCount,b=e.maxTagTextLength,x=e.maxTagPlaceholder,h=x===void 0?function(t){return"+ ".concat(t.length," ...")}:x,m=e.tagRender,_=e.onToggleOpen,A=e.onRemove,G=e.onInputChange,H=e.onInputPaste,J=e.onInputKeyDown,Q=e.onInputMouseDown,U=e.onInputCompositionStart,X=e.onInputCompositionEnd,Y=e.onInputBlur,E=o.useRef(null),Z=C.useState(0),w=M(Z,2),$=w[0],ee=w[1],te=C.useState(!1),D=M(te,2),ne=D[0],S=D[1],r="".concat(c,"-selection"),v=d||f==="multiple"&&y===!1||f==="tags"?O:"",oe=f==="tags"||f==="multiple"&&y===!1||z&&(d||ne);de(function(){ee(E.current.scrollWidth)},[v]);var q=function(t,n,u,p,i){return o.createElement("span",{title:fe.getTitle(t),className:ue("".concat(r,"-item"),ce({},"".concat(r,"-item-disabled"),u))},o.createElement("span",{className:"".concat(r,"-item-content")},n),p&&o.createElement(se,{className:"".concat(r,"-item-remove"),onMouseDown:R,onClick:i,customizeIcon:L},"×"))},N=function(t,n,u,p,i,s){return o.createElement("span",{onMouseDown:function(g){R(g),_(!d)}},m({label:n,value:t,disabled:u,closable:p,onClose:i,isMaxTag:!!s}))},ae=o.createElement("div",{className:"".concat(r,"-search"),style:{width:$},onFocus:function(){S(!0)},onBlur:function(){S(!1)}},o.createElement(pe,{ref:j,open:d,prefixCls:c,id:a,inputElement:null,disabled:I,autoFocus:B,autoComplete:F,editable:oe,activeDescendantId:k,value:v,onKeyDown:J,onMouseDown:Q,onChange:G,onPaste:H,onCompositionStart:U,onCompositionEnd:X,onBlur:Y,tabIndex:V,attrs:le(e,!0)}),o.createElement("span",{ref:E,className:"".concat(r,"-search-mirror"),"aria-hidden":!0},v," ")),re=o.createElement(ie.default,{prefixCls:"".concat(r,"-overflow"),data:l,renderItem:function(t){var n=t.disabled,u=t.label,p=t.value,i=!I&&!n,s=u;if(typeof b=="number"&&(typeof u=="string"||typeof u=="number")){var g=String(s);g.length>b&&(s="".concat(g.slice(0,b),"..."))}var P=function(T){T&&T.stopPropagation(),A(t)};return typeof m=="function"?N(p,s,n,i,P):q(t,s,n,i,P)},renderRest:function(t){if(!l.length)return null;var n=typeof h=="function"?h(t):h;return typeof m=="function"?N(void 0,n,!1,!1,void 0,!0):q({title:n},n,!1)},suffix:ae,itemKey:ge,maxCount:W});return o.createElement("span",{className:"".concat(r,"-wrap")},re,!l.length&&!v&&o.createElement("span",{className:"".concat(r,"-placeholder")},K))};
