import j from "../../../@babel/runtime/helpers/esm/defineProperty.js";
import d from "../../../@babel/runtime/helpers/esm/objectSpread2.js";
import * as y from "react";
import { toArray as C } from "../utils/commonUtil.js";
import { injectPropsWithOption as O } from "../utils/valueUtil.js";
function l(t, e) {
  return C(t).join("").toUpperCase().includes(e);
}
const E = function(t, e, o, i, p) {
  return y.useMemo(function() {
    if (!o || i === !1) return t;
    var f = e.options, m = e.label, v = e.value, u = [], h = typeof i == "function", c = o.toUpperCase(), s = h ? i : function(n, r) {
      return p ? l(r[p], c) : r[f] ? l(r[m !== "children" ? m : "label"], c) : l(r[v], c);
    }, a = h ? function(n) {
      return O(n);
    } : function(n) {
      return n;
    };
    return t.forEach(function(n) {
      if (n[f]) if (s(o, a(n))) u.push(n);
      else {
        var r = n[f].filter(function(b) {
          return s(o, a(b));
        });
        r.length && u.push(d(d({}, n), {}, j({}, f, r)));
      }
      else s(o, a(n)) && u.push(n);
    }), u;
  }, [t, i, p, o, e]);
};
export {
  E as default
};
