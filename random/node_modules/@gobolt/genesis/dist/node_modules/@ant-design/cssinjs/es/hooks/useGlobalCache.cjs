"use strict";const O=require("../../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),D=require("../../../../@babel/runtime/helpers/esm/toConsumableArray.cjs"),E=require("react"),h=require("../Cache.cjs"),G=require("../StyleContext.cjs"),_=require("./useCompatibleInsertionEffect.cjs"),x=require("./useEffectCleanupRegister.cjs"),C=require("./useHMR.cjs");function M(t){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const o in t)if(o!=="default"){const u=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(i,o,u.get?u:{enumerable:!0,get:()=>t[o]})}}return i.default=t,Object.freeze(i)}const m=M(E);module.exports=function(t,i,o,u,d){var a=m.useContext(G.default).cache,y=[t].concat(D(i)),e=h.pathKey(y),N=x([e]),g=C(),p=function(l){a.opUpdate(e,function(s){var n=O(s||[void 0,void 0],2),r=n[0],c=r===void 0?0:r,f=n[1],b=f;process.env.NODE_ENV!=="production"&&f&&g&&(u==null||u(b,g),b=null);var j=[c,b||o()];return l?l(j):j})};m.useMemo(function(){p()},[e]);var v=a.opGet(e);process.env.NODE_ENV==="production"||v||(p(),v=a.opGet(e));var q=v[1];return _(function(){d==null||d(q)},function(l){return p(function(s){var n=O(s,2),r=n[0],c=n[1];return l&&r===0&&(d==null||d(q)),[r+1,c]}),function(){a.opUpdate(e,function(s){var n=O(s||[],2),r=n[0],c=r===void 0?0:r,f=n[1];return c-1===0?(N(function(){!l&&a.opGet(e)||u==null||u(f,!1)}),null):[c-1,f]})}},[e]),q};
