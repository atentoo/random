"use strict";const n=require("../../../../../@babel/runtime/helpers/esm/typeof.cjs"),o=require("../../../../../@babel/runtime/helpers/esm/classCallCheck.cjs"),u=require("../../../../../@babel/runtime/helpers/esm/createClass.cjs"),c=require("../../../../../@babel/runtime/helpers/esm/defineProperty.cjs"),h=require("react");var r=new(function(){function a(){o(this,a),c(this,"map",new Map),c(this,"objectIDMap",new WeakMap),c(this,"nextID",0),c(this,"lastAccessBeat",new Map),c(this,"accessBeat",0)}return u(a,[{key:"set",value:function(e,s){this.clear();var t=this.getCompositeKey(e);this.map.set(t,s),this.lastAccessBeat.set(t,Date.now())}},{key:"get",value:function(e){var s=this.getCompositeKey(e),t=this.map.get(s);return this.lastAccessBeat.set(s,Date.now()),this.accessBeat+=1,t}},{key:"getCompositeKey",value:function(e){var s=this;return e.map(function(t){return t&&n(t)==="object"?"obj_".concat(s.getObjectID(t)):"".concat(n(t),"_").concat(t)}).join("|")}},{key:"getObjectID",value:function(e){if(this.objectIDMap.has(e))return this.objectIDMap.get(e);var s=this.nextID;return this.objectIDMap.set(e,s),this.nextID+=1,s}},{key:"clear",value:function(){var e=this;if(this.accessBeat>1e4){var s=Date.now();this.lastAccessBeat.forEach(function(t,i){s-t>6e5&&(e.map.delete(i),e.lastAccessBeat.delete(i))}),this.accessBeat=0}}}]),a}());module.exports=function(a,e){return h.useMemo(function(){var s=r.get(e);if(s)return s;var t=a();return r.set(e,t),t},e)};
