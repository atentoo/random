"use strict";const p=require("react"),f=require("../../../../rc-util/es/raf.cjs");function b(r){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const t in r)if(t!=="default"){const e=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(n,t,e.get?e:{enumerable:!0,get:()=>r[t]})}}return n.default=r,Object.freeze(n)}const u=b(p);module.exports=function(r){const[n,t]=u.useState(r),e=u.useRef(null),c=u.useRef([]),l=u.useRef(!1);return u.useEffect(()=>(l.current=!1,()=>{l.current=!0,f.cancel(e.current),e.current=null}),[]),[n,function(s){l.current||(e.current===null&&(c.current=[],e.current=f(()=>{e.current=null,t(i=>{let o=i;return c.current.forEach(a=>{o=a(o)}),o})})),c.current.push(s))}]};
