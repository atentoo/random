"use strict";const B=require("react"),D=require("../../../../../_virtual/index.cjs"),F=require("../../../../rc-motion/es/CSSMotion.cjs");require("../../../../rc-motion/es/CSSMotionList.cjs");const g=require("../../../../rc-util/es/raf.cjs"),P=require("../../../../rc-util/es/ref.cjs"),U=require("../../config-provider/UnstableContext.cjs"),_=require("./interface.cjs"),G=require("./util.cjs");function H(t){const s=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const e in t)if(e!=="default"){const i=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(s,e,i.get?i:{enumerable:!0,get:()=>t[e]})}}return s.default=t,Object.freeze(s)}const r=H(B);function p(t){return Number.isNaN(t)?0:t}const M=t=>{const{className:s,target:e,component:i,registerUnmount:u}=t,f=r.useRef(null),l=r.useRef(null);r.useEffect(()=>{l.current=u()},[]);const[m,R]=r.useState(null),[h,y]=r.useState([]),[S,q]=r.useState(0),[E,N]=r.useState(0),[O,T]=r.useState(0),[j,x]=r.useState(0),[C,w]=r.useState(!1),v={left:S,top:E,width:O,height:j,borderRadius:h.map(n=>`${n}px`).join(" ")};function b(){const n=getComputedStyle(e);R(G.getTargetWaveColor(e));const o=n.position==="static",{borderLeftWidth:a,borderTopWidth:c}=n;q(o?e.offsetLeft:p(-parseFloat(a))),N(o?e.offsetTop:p(-parseFloat(c))),T(e.offsetWidth),x(e.offsetHeight);const{borderTopLeftRadius:d,borderTopRightRadius:W,borderBottomLeftRadius:k,borderBottomRightRadius:z}=n;y([d,W,z,k].map(A=>p(parseFloat(A))))}if(m&&(v["--wave-color"]=m),r.useEffect(()=>{if(e){const n=g(()=>{b(),w(!0)});let o;return typeof ResizeObserver<"u"&&(o=new ResizeObserver(b),o.observe(e)),()=>{g.cancel(n),o==null||o.disconnect()}}},[]),!C)return null;const L=(i==="Checkbox"||i==="Radio")&&(e==null?void 0:e.classList.contains(_.TARGET_CLS));return r.createElement(F.default,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(n,o)=>{var a,c;if(o.deadline||o.propertyName==="opacity"){const d=(a=f.current)===null||a===void 0?void 0:a.parentElement;(c=l.current)===null||c===void 0||c.call(l).then(()=>{d==null||d.remove()})}return!1}},(n,o)=>{let{className:a}=n;return r.createElement("div",{ref:P.composeRef(f,o),className:D(s,a,{"wave-quick":L}),style:v})})};module.exports=(t,s)=>{var e;const{component:i}=s;if(i==="Checkbox"&&!(!((e=t.querySelector("input"))===null||e===void 0)&&e.checked))return;const u=document.createElement("div");u.style.position="absolute",u.style.left="0px",u.style.top="0px",t==null||t.insertBefore(u,t==null?void 0:t.firstChild);const f=U.getReactRender();let l=null;l=f(r.createElement(M,Object.assign({},s,{target:t,registerUnmount:function(){return l}})),u)};
