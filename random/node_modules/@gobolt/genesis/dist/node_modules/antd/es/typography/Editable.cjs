"use strict";const T=require("react"),w=require("../../../@ant-design/icons/es/icons/EnterOutlined.cjs"),A=require("../../../../_virtual/index.cjs"),b=require("../../../rc-util/es/KeyCode.cjs"),D=require("../_util/reactNode.cjs"),k=require("../input/TextArea.cjs"),L=require("./style/index.cjs");function P(l){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(l){for(const o in l)if(o!=="default"){const a=Object.getOwnPropertyDescriptor(l,o);Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:()=>l[o]})}}return t.default=l,Object.freeze(t)}const r=P(T);module.exports=l=>{const{prefixCls:t,"aria-label":o,className:a,style:v,direction:C,maxLength:S,autoSize:q=!0,value:i,onSave:x,onCancel:h,onEnd:f,component:m,enterIcon:d=r.createElement(w,null)}=l,s=r.useRef(null),c=r.useRef(!1),g=r.useRef(null),[y,p]=r.useState(i);r.useEffect(()=>{p(i)},[i]),r.useEffect(()=>{var n;if(!((n=s.current)===null||n===void 0)&&n.resizableTextArea){const{textArea:e}=s.current.resizableTextArea;e.focus();const{length:u}=e.value;e.setSelectionRange(u,u)}},[]);const E=()=>{x(y.trim())},[K,z,N]=L.default(t),O=A(t,`${t}-edit-content`,{[`${t}-rtl`]:C==="rtl",[`${t}-${m}`]:!!m},a,z,N);return K(r.createElement("div",{className:O,style:v},r.createElement(k,{ref:s,maxLength:S,value:y,onChange:n=>{let{target:e}=n;p(e.value.replace(/[\n\r]/g,""))},onKeyDown:n=>{let{keyCode:e}=n;c.current||(g.current=e)},onKeyUp:n=>{let{keyCode:e,ctrlKey:u,altKey:j,metaKey:R,shiftKey:$}=n;g.current!==e||c.current||u||j||R||$||(e===b.ENTER?(E(),f==null||f()):e===b.ESC&&h())},onCompositionStart:()=>{c.current=!0},onCompositionEnd:()=>{c.current=!1},onBlur:()=>{E()},"aria-label":o,rows:1,autoSize:q}),d!==null?D.cloneElement(d,{className:`${t}-edit-content-confirm`}):null))};
