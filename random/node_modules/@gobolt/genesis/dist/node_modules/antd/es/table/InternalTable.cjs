"use strict";const Ze=require("react"),O=require("../../../../_virtual/index.cjs"),Je=require("../../../rc-table/es/constant.cjs");require("../../../rc-table/es/Footer/index.cjs"),require("../../../rc-table/es/Table.cjs"),require("../../../rc-util/es/warning.cjs"),require("../../../rc-table/es/VirtualTable/index.cjs");const Qe=require("../../../rc-table/es/hooks/useColumns/index.cjs"),Ye=require("../../../rc-util/es/omit.cjs"),en=require("../_util/hooks/useProxyImperativeHandle.cjs"),nn=require("../_util/scrollTo.cjs"),tn=require("../_util/warning.cjs"),rn=require("../config-provider/context.cjs"),on=require("../config-provider/defaultRenderEmpty.cjs"),an=require("../config-provider/hooks/useCSSVarCls.cjs"),ln=require("../config-provider/hooks/useSize.cjs"),sn=require("../grid/hooks/useBreakpoint.cjs"),un=require("../locale/en_US.cjs"),cn=require("../pagination/Pagination.cjs"),dn=require("../spin/index.cjs");require("../../../@ant-design/cssinjs/es/extractStyle.cjs"),require("../../../@ant-design/cssinjs/es/hooks/useCacheToken.cjs"),require("../../../@ant-design/cssinjs/es/StyleContext.cjs"),require("../../../@ant-design/cssinjs/es/theme/createTheme.cjs"),require("../../../@ant-design/cssinjs/es/theme/ThemeCache.cjs"),require("../../../@ant-design/cssinjs/es/hooks/useCompatibleInsertionEffect.cjs"),require("../../../@ant-design/cssinjs/es/hooks/useEffectCleanupRegister.cjs"),require("../../../@ant-design/cssinjs/es/hooks/useHMR.cjs"),require("../../../@ant-design/cssinjs/es/transformers/legacyLogicalProperties.cjs"),require("../../../rc-util/es/hooks/useLayoutEffect.cjs"),require("../../../rc-util/es/ref.cjs"),require("../../../@ant-design/cssinjs-utils/es/util/statistic.cjs"),require("../../../@ant-design/cssinjs-utils/es/_util/hooks/useUniqueMemo.cjs");const pn=require("../theme/useToken.cjs"),gn=require("./ExpandIcon.cjs"),mn=require("./hooks/useContainerWidth.cjs"),V=require("./hooks/useFilter/index.cjs"),fn=require("./hooks/useLazyKVMap.cjs"),W=require("./hooks/usePagination.cjs"),bn=require("./hooks/useSelection.cjs"),U=require("./hooks/useSorter.cjs"),Cn=require("./hooks/useTitleColumns.cjs"),qn=require("./RcTable/index.cjs"),vn=require("./RcTable/VirtualTable.cjs"),xn=require("./style/index.cjs");function hn(f){const S=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(f){for(const b in f)if(b!=="default"){const v=Object.getOwnPropertyDescriptor(f,b);Object.defineProperty(S,b,v.get?v:{enumerable:!0,get:()=>f[b]})}}return S.default=f,Object.freeze(S)}const t=hn(Ze),yn=[],On=(f,S)=>{var b,v;const{prefixCls:qe,className:ve,rootClassName:B,style:xe,size:he,bordered:ye,dropdownPrefixCls:Oe,dataSource:Se,pagination:d,rowSelection:z,rowKey:x="key",rowClassName:_,columns:G,children:X,childrenColumnName:Ne,onChange:Z,getPopupContainer:J,loading:j,expandIcon:we,expandable:N,expandedRowRender:je,expandIconColumnIndex:Ie,indentSize:Q,scroll:Y,sortDirections:Ee,locale:I,showSorterTooltip:Te={target:"full-header"},virtual:ee}=f,M=tn.devUseWarning("Table");process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="production"&&M(!(typeof x=="function"&&x.length>1),"usage","`index` parameter of `rowKey` function is deprecated. There is no guarantee that it will work as expected.");const E=t.useMemo(()=>G||Qe.convertChildrenToColumns(X),[G,X]),Pe=t.useMemo(()=>E.some(e=>e.responsive),[E]),$=sn(Pe),k=t.useMemo(()=>{const e=new Set(Object.keys($).filter(n=>$[n]));return E.filter(n=>!n.responsive||n.responsive.some(r=>e.has(r)))},[E,$]),De=Ye(f,["className","style","columns"]),{locale:Re=un,direction:A,table:h,renderEmpty:ne,getPrefixCls:te,getPopupContainer:re}=t.useContext(rn.ConfigContext),y=ln(he),T=Object.assign(Object.assign({},Re.Table),I),C=Se||yn,o=te("table",qe),ze=te("dropdown",Oe),[,oe]=pn.default(),P=an(o),[_e,ie,ae]=xn.default(o,P),s=Object.assign(Object.assign({childrenColumnName:Ne,expandIconColumnIndex:Ie},N),{expandIcon:(b=N==null?void 0:N.expandIcon)!==null&&b!==void 0?b:(v=h==null?void 0:h.expandable)===null||v===void 0?void 0:v.expandIcon}),{childrenColumnName:q="children"}=s,le=t.useMemo(()=>C.some(e=>e==null?void 0:e[q])?"nest":je||N!=null&&N.expandedRowRender?"row":null,[C]),K={body:t.useRef(null)},Me=mn(o),se=t.useRef(null),ue=t.useRef(null);en(S,()=>Object.assign(Object.assign({},ue.current),{nativeElement:se.current}));const D=t.useMemo(()=>typeof x=="function"?x:e=>e==null?void 0:e[x],[x]),[$e]=fn(C,q,D),c={},F=function(e,n){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];var a,u,g,m;const l=Object.assign(Object.assign({},c),e);r&&((a=c.resetPagination)===null||a===void 0||a.call(c),!((u=l.pagination)===null||u===void 0)&&u.current&&(l.pagination.current=1),d&&((g=d.onChange)===null||g===void 0||g.call(d,1,(m=l.pagination)===null||m===void 0?void 0:m.pageSize))),Y&&Y.scrollToFirstRowOnChange!==!1&&K.body.current&&nn(0,{getContainer:()=>K.body.current}),Z==null||Z(l.pagination,l.filters,l.sorter,{currentDataSource:V.getFilterData(U.getSortData(C,l.sorterStates,q),l.filterStates,q),action:n})},[ce,L,de,ke]=U.default({prefixCls:o,mergedColumns:k,onSorterChange:(e,n)=>{F({sorter:e,sorterStates:n},"sort",!1)},sortDirections:Ee||["ascend","descend"],tableLocale:T,showSorterTooltip:Te}),Ae=t.useMemo(()=>U.getSortData(C,L,q),[C,L]);c.sorter=ke(),c.sorterStates=L;const[pe,ge,w]=V.default({prefixCls:o,locale:T,dropdownPrefixCls:ze,mergedColumns:k,onFilterChange:(e,n)=>{F({filters:e,filterStates:n},"filter",!0)},getPopupContainer:J||re,rootClassName:O(B,P)}),p=V.getFilterData(Ae,ge,q);c.filters=w,c.filterStates=ge;const Ke=t.useMemo(()=>{const e={};return Object.keys(w).forEach(n=>{w[n]!==null&&(e[n]=w[n])}),Object.assign(Object.assign({},de),{filters:e})},[de,w]),[Fe]=Cn(Ke),[i,Le]=W.default(p.length,(e,n)=>{F({pagination:Object.assign(Object.assign({},c.pagination),{current:e,pageSize:n})},"paginate")},d);c.pagination=d===!1?{}:W.getPaginationParam(i,d),c.resetPagination=Le;const me=t.useMemo(()=>{if(d===!1||!i.pageSize)return p;const{current:e=1,total:n,pageSize:r=W.DEFAULT_PAGE_SIZE}=i;return process.env.NODE_ENV!=="production"&&M(e>0,"usage","`current` should be positive number."),p.length<n?p.length>r?(process.env.NODE_ENV!=="production"&&M(!1,"usage","`dataSource` length is less than `pagination.total` but large than `pagination.pageSize`. Please make sure your config correct data with async mode."),p.slice((e-1)*r,e*r)):p:p.slice((e-1)*r,e*r)},[!!d,p,i==null?void 0:i.current,i==null?void 0:i.pageSize,i==null?void 0:i.total]),[fe,He]=bn.default({prefixCls:o,data:p,pageData:me,getRowKey:D,getRecordByKey:$e,expandType:le,childrenColumnName:q,locale:T,getPopupContainer:J||re},z);s.__PARENT_RENDER_ICON__=s.expandIcon,s.expandIcon=s.expandIcon||we||gn(T),le==="nest"&&s.expandIconColumnIndex===void 0?s.expandIconColumnIndex=z?1:0:s.expandIconColumnIndex>0&&z&&(s.expandIconColumnIndex-=1),typeof s.indentSize!="number"&&(s.indentSize=typeof Q=="number"?Q:15);const Ve=t.useCallback(e=>Fe(fe(pe(ce(e)))),[ce,pe,fe]);let be,R,H;if(d!==!1&&(i!=null&&i.total)){let e;e=i.size?i.size:y==="small"||y==="middle"?"small":void 0;const n=u=>t.createElement(cn,Object.assign({},i,{className:O(`${o}-pagination ${o}-pagination-${u}`,i.className),size:e})),r=A==="rtl"?"left":"right",{position:a}=i;if(a!==null&&Array.isArray(a)){const u=a.find(l=>l.includes("top")),g=a.find(l=>l.includes("bottom")),m=a.every(l=>`${l}`=="none");u||g||m||(R=n(r)),u&&(be=n(u.toLowerCase().replace("top",""))),g&&(R=n(g.toLowerCase().replace("bottom","")))}else R=n(r)}typeof j=="boolean"?H={spinning:j}:typeof j=="object"&&(H=Object.assign({spinning:!0},j));const We=O(ae,P,`${o}-wrapper`,h==null?void 0:h.className,{[`${o}-wrapper-rtl`]:A==="rtl"},ve,B,ie),Ue=Object.assign(Object.assign({},h==null?void 0:h.style),xe),Be=(I==null?void 0:I.emptyText)!==void 0?I.emptyText:(ne==null?void 0:ne("Table"))||t.createElement(on,{componentName:"Table"}),Ge=ee?vn:qn,Ce={},Xe=t.useMemo(()=>{const{fontSize:e,lineHeight:n,lineWidth:r,padding:a,paddingXS:u,paddingSM:g}=oe,m=Math.floor(e*n);switch(y){case"middle":return 2*g+m+r;case"small":return 2*u+m+r;default:return 2*a+m+r}},[oe,y]);return ee&&(Ce.listItemHeight=Xe),_e(t.createElement("div",{ref:se,className:We,style:Ue},t.createElement(dn,Object.assign({spinning:!1},H),be,t.createElement(Ge,Object.assign({},Ce,De,{ref:ue,columns:k,direction:A,expandable:s,prefixCls:o,className:O({[`${o}-middle`]:y==="middle",[`${o}-small`]:y==="small",[`${o}-bordered`]:ye,[`${o}-empty`]:C.length===0},ae,P,ie),data:me,rowKey:D,rowClassName:(e,n,r)=>{let a;return a=O(typeof _=="function"?_(e,n,r):_),O({[`${o}-row-selected`]:He.has(D(e,n))},a)},emptyText:Be,internalHooks:Je.INTERNAL_HOOKS,internalRefs:K,transformColumns:Ve,getContainerWidth:Me})),R)))},Sn=t.forwardRef(On);module.exports=Sn;
