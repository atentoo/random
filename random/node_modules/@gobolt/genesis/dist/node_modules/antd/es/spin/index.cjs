"use strict";const W=require("react"),d=require("../../../../_virtual/index.cjs"),A=require("../../../throttle-debounce/esm/index.cjs"),B=require("../_util/warning.cjs"),F=require("../config-provider/context.cjs"),G=require("./Indicator/index.cjs"),H=require("./style/index.cjs"),J=require("./usePercent.cjs");function K(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const l in e)if(l!=="default"){const t=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(r,l,t.get?t:{enumerable:!0,get:()=>e[l]})}}return r.default=e,Object.freeze(r)}const i=K(W);var L=function(e,r){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(t=Object.getOwnPropertySymbols(e);s<t.length;s++)r.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(l[t[s]]=e[t[s]])}return l};let C;const b=e=>{var r;const{prefixCls:l,spinning:t=!0,delay:s=0,className:w,rootClassName:v,size:O="default",tip:p,wrapperClassName:x,style:q,children:f,fullscreen:c=!1,indicator:E,percent:S}=e,j=L(e,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:h,direction:D,className:P,style:_,indicator:k}=F.useComponentConfig("spin"),n=h("spin",l),[z,m,N]=H.default(n),[o,$]=i.useState(()=>t&&!function(a,u){return!!a&&!!u&&!Number.isNaN(Number(u))}(t,s)),V=J(o,S);i.useEffect(()=>{if(t){const a=A.debounce(s,()=>{$(!0)});return a(),()=>{var u;(u=a==null?void 0:a.cancel)===null||u===void 0||u.call(a)}}$(!1)},[s,t]);const g=i.useMemo(()=>f!==void 0&&!c,[f,c]);if(process.env.NODE_ENV!=="production"){const a=B.devUseWarning("Spin");process.env.NODE_ENV!=="production"&&a(!p||g||c,"usage","`tip` only work in nest or fullscreen pattern.")}const I=d(n,P,{[`${n}-sm`]:O==="small",[`${n}-lg`]:O==="large",[`${n}-spinning`]:o,[`${n}-show-text`]:!!p,[`${n}-rtl`]:D==="rtl"},w,!c&&v,m,N),M=d(`${n}-container`,{[`${n}-blur`]:o}),T=(r=E??k)!==null&&r!==void 0?r:C,U=Object.assign(Object.assign({},_),q),y=i.createElement("div",Object.assign({},j,{style:U,className:I,"aria-live":"polite","aria-busy":o}),i.createElement(G,{prefixCls:n,indicator:T,percent:V}),p&&(g||c)?i.createElement("div",{className:`${n}-text`},p):null);return z(g?i.createElement("div",Object.assign({},j,{className:d(`${n}-nested-loading`,x,m,N)}),o&&i.createElement("div",{key:"loading"},y),i.createElement("div",{className:M,key:"container"},f)):c?i.createElement("div",{className:d(`${n}-fullscreen`,{[`${n}-fullscreen-show`]:o},v,m,N)},y):y)};b.setDefaultIndicator=e=>{C=e},process.env.NODE_ENV!=="production"&&(b.displayName="Spin"),module.exports=b;
