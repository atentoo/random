import * as p from "react";
import d from "../../../../../_virtual/index5.js";
import y from "../../../../rc-util/es/hooks/useEvent.js";
import v from "../../_util/toList.js";
var h = function(s, o, n, r) {
  return new (n || (n = Promise))(function(f, l) {
    function i(e) {
      try {
        c(r.next(e));
      } catch (t) {
        l(t);
      }
    }
    function u(e) {
      try {
        c(r.throw(e));
      } catch (t) {
        l(t);
      }
    }
    function c(e) {
      var t;
      e.done ? f(e.value) : (t = e.value, t instanceof n ? t : new n(function(a) {
        a(t);
      })).then(i, u);
    }
    c((r = r.apply(s, o || [])).next());
  });
};
const g = (s) => {
  let { copyConfig: o, children: n } = s;
  const [r, f] = p.useState(!1), [l, i] = p.useState(!1), u = p.useRef(null), c = () => {
    u.current && clearTimeout(u.current);
  }, e = {};
  return o.format && (e.format = o.format), p.useEffect(() => c, []), { copied: r, copyLoading: l, onClick: y((t) => h(void 0, void 0, void 0, function* () {
    var a;
    t == null || t.preventDefault(), t == null || t.stopPropagation(), i(!0);
    try {
      const m = typeof o.text == "function" ? yield o.text() : o.text;
      d(m || v(n, !0).join("") || "", e), i(!1), f(!0), c(), u.current = setTimeout(() => {
        f(!1);
      }, 3e3), (a = o.onCopy) === null || a === void 0 || a.call(o, t);
    } catch (m) {
      throw i(!1), m;
    }
  })) };
};
export {
  g as default
};
