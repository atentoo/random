import E from "../../../@babel/runtime/helpers/esm/slicedToArray.js";
import R from "../../../rc-util/es/hooks/useState.js";
import * as x from "react";
import { STEP_NONE as c, STEP_ACTIVATED as i, STEP_PREPARE as f, STEP_PREPARED as N, STEP_START as C, STEP_ACTIVE as p } from "../interface.js";
import D from "./useIsomorphicLayoutEffect.js";
import h from "./useNextFrame.js";
var I = [f, C, p, i], O = [f, N], V = !1, g = !0;
function q(t) {
  return t === p || t === i;
}
const w = function(t, P, S) {
  var T = R(c), s = E(T, 2), o = s[0], n = s[1], A = h(), a = E(A, 2), v = a[0], _ = a[1], u = P ? O : I;
  return D(function() {
    if (o !== c && o !== i) {
      var d = u.indexOf(o), r = u[d + 1], e = S(o);
      e === V ? n(r, !0) : r && v(function(l) {
        function m() {
          l.isCanceled() || n(r, !0);
        }
        e === !0 ? m() : Promise.resolve(e).then(m);
      });
    }
  }, [t, o]), x.useEffect(function() {
    return function() {
      _();
    };
  }, []), [function() {
    n(f, !0);
  }, o];
};
export {
  g as DoStep,
  V as SkipStep,
  w as default,
  q as isActive
};
