"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const A=require("../../@babel/runtime/helpers/esm/defineProperty.cjs"),n=require("../../@babel/runtime/helpers/esm/objectSpread2.cjs"),U=require("../../@babel/runtime/helpers/esm/slicedToArray.cjs"),V=require("../../@babel/runtime/helpers/esm/typeof.cjs"),B=require("../../../_virtual/index.cjs"),F=require("../../rc-util/es/Dom/findDOMNode.cjs"),b=require("../../rc-util/es/ref.cjs"),T=require("react"),G=require("./context.cjs"),I=require("./DomWrapper.cjs"),J=require("./hooks/useStatus.cjs"),K=require("./hooks/useStepQueue.cjs"),N=require("./interface.cjs"),R=require("./util/motion.cjs");function W(r){const u=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const i in r)if(i!=="default"){const e=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(u,i,e.get?e:{enumerable:!0,get:()=>r[i]})}}return u.default=r,Object.freeze(u)}const o=W(T);function h(r){var u=r;V(r)==="object"&&(u=r.transitionSupport);var i=o.forwardRef(function(e,y){var E=e.visible,O=E===void 0||E,P=e.removeOnLeave,C=P===void 0||P,w=e.forceRender,a=e.children,f=e.motionName,d=e.leavedClassName,x=e.eventProps,D=function(s,z){return!(!s.motionName||!u||z===!1)}(e,o.useContext(G.Context).motion),p=T.useRef(),M=T.useRef(),L=J(D,O,function(){try{return p.current instanceof HTMLElement?p.current:F.default(M.current)}catch{return null}},e),v=U(L,4),q=v[0],g=v[1],k=v[2],S=v[3],j=o.useRef(S);S&&(j.current=!0);var t,l=o.useCallback(function(s){p.current=s,b.fillRef(y,s)},[y]),m=n(n({},x),{},{visible:O});if(a)if(q===N.STATUS_NONE)t=S?a(n({},m),l):!C&&j.current&&d?a(n(n({},m),{},{className:d}),l):w||!C&&!d?a(n(n({},m),{},{style:{display:"none"}}),l):null;else{var c;g===N.STEP_PREPARE?c="prepare":K.isActive(g)?c="active":g===N.STEP_START&&(c="start");var _=R.getTransitionName(f,"".concat(q,"-").concat(c));t=a(n(n({},m),{},{className:B(R.getTransitionName(f,q),A(A({},_,_&&c),f,typeof f=="string")),style:k}),l)}else t=null;return o.isValidElement(t)&&b.supportRef(t)&&(b.getNodeRef(t)||(t=o.cloneElement(t,{ref:l}))),o.createElement(I,{ref:M},t)});return i.displayName="CSSMotion",i}const X=h(R.supportTransition);exports.default=X,exports.genCSSMotion=h;
