"use strict";const I=require("../../../rc-util/es/hooks/useLayoutEffect.cjs"),n=require("react");var R=14/15;module.exports=function(h,l,f){var u,c=n.useRef(!1),i=n.useRef(0),v=n.useRef(0),t=n.useRef(null),a=n.useRef(null),d=function(e){if(c.current){var E=Math.ceil(e.touches[0].pageX),g=Math.ceil(e.touches[0].pageY),o=i.current-E,s=v.current-g,r=Math.abs(o)>Math.abs(s);r?i.current=E:v.current=g;var L=f(r,r?o:s,!1,e);L&&e.preventDefault(),clearInterval(a.current),L&&(a.current=setInterval(function(){r?o*=R:s*=R;var m=Math.floor(r?o:s);(!f(r,m,!0)||Math.abs(m)<=.1)&&clearInterval(a.current)},16))}},p=function(){c.current=!1,u()},M=function(e){u(),e.touches.length!==1||c.current||(c.current=!0,i.current=Math.ceil(e.touches[0].pageX),v.current=Math.ceil(e.touches[0].pageY),t.current=e.target,t.current.addEventListener("touchmove",d,{passive:!1}),t.current.addEventListener("touchend",p,{passive:!0}))};u=function(){t.current&&(t.current.removeEventListener("touchmove",d),t.current.removeEventListener("touchend",p))},I.default(function(){return h&&l.current.addEventListener("touchstart",M,{passive:!0}),function(){var e;(e=l.current)===null||e===void 0||e.removeEventListener("touchstart",M),u(),clearInterval(a.current)}},[h])};
