"use strict";const I=require("../../../@babel/runtime/helpers/esm/typeof.cjs"),q=require("../../../@babel/runtime/helpers/esm/objectSpread2.cjs"),R=require("../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),V=require("react"),B=require("../../../rc-util/es/raf.cjs"),C=require("../../../rc-util/es/hooks/useLayoutEffect.cjs");require("../../../rc-util/es/ref.cjs");const F=require("../../../rc-util/es/warning.cjs");function G(r){const i=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const n in r)if(n!=="default"){const l=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(i,n,l.get?l:{enumerable:!0,get:()=>r[n]})}}return i.default=r,Object.freeze(i)}const P=G(V);module.exports=function(r,i,n,l,f,y,j,M){var N=P.useRef(),S=P.useState(null),x=R(S,2),t=x[0],v=x[1];return C.default(function(){if(t&&t.times<10){if(!r.current)return void v(function(H){return q({},H)});y();var e=t.targetAlign,s=t.originAlign,d=t.index,o=t.offset,u=r.current.clientHeight,g=!1,m=e,a=null;if(u){for(var T=e||s,O=0,c=0,p=0,k=Math.min(i.length-1,d),b=0;b<=k;b+=1){var _=f(i[b]);c=O;var A=n.get(_);O=p=c+(A===void 0?l:A)}for(var z=T==="top"?o:u-o,h=k;h>=0;h-=1){var E=f(i[h]),w=n.get(E);if(w===void 0){g=!0;break}if((z-=w)<=0)break}switch(T){case"top":a=c-o;break;case"bottom":a=p-u+o;break;default:var D=r.current.scrollTop;c<D?m="top":p>D+u&&(m="bottom")}a!==null&&j(a),a!==t.lastTop&&(g=!0)}g&&v(q(q({},t),{},{times:t.times+1,targetAlign:m,lastTop:a}))}else process.env.NODE_ENV!=="production"&&(t==null?void 0:t.times)===10&&F.warningOnce(!1,"Seems `scrollTo` with `rc-virtual-list` reach the max limitation. Please fire issue for us. Thanks.")},[t,r.current]),function(e){if(e!=null){if(B.cancel(N.current),typeof e=="number")j(e);else if(e&&I(e)==="object"){var s,d=e.align;s="index"in e?e.index:i.findIndex(function(u){return f(u)===e.key});var o=e.offset;v({times:0,index:s,offset:o===void 0?0:o,originAlign:d})}}else M()}};
