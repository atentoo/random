"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const x=require("../../@babel/runtime/helpers/esm/slicedToArray.cjs"),S=require("../../rc-util/es/warning.cjs"),r=require("react"),P=require("./FieldContext.cjs"),D=require("./utils/typeUtil.cjs"),b=require("./utils/valueUtil.cjs"),A=require("../../rc-util/es/utils/get.cjs");function m(t){try{return JSON.stringify(t)}catch{return Math.random()}}var C=process.env.NODE_ENV!=="production"?function(t){var e=t.join("__RC_FIELD_FORM_SPLIT__"),n=r.useRef(e);S.warningOnce(n.current===e,"`useWatch` is not support dynamic `namePath`. Please provide static instead.")}:function(){};exports.default=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var c=e[0],_=e[1],s=_===void 0?{}:_,l=D.isFormInstance(s)?{form:s}:s,p=l.form,F=r.useState(),O=x(F,2),i=O[0],h=O[1],q=r.useMemo(function(){return m(i)},[i]),a=r.useRef(q);a.current=q;var I=r.useContext(P.default),o=p||I,f=o&&o._init;process.env.NODE_ENV!=="production"&&S.warningOnce(e.length===2&&!p||f,"useWatch requires a form instance since it can not auto detect from context.");var v=b.getNamePath(c),y=r.useRef(v);return y.current=v,C(v),r.useEffect(function(){if(f){var E=o.getFieldsValue,j=(0,o.getInternalHooks)(P.HOOK_MARK).registerWatch,M=function(d,g){var u=l.preserve?g:d;return typeof c=="function"?c(u):A(u,y.current)},w=j(function(d,g){var u=M(d,g),R=m(u);a.current!==R&&(a.current=R,h(u))}),N=M(E(),E(!0));return i!==N&&h(N),w}},[f]),i},exports.stringify=m;
