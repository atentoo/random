"use strict";const $=require("../../../@babel/runtime/helpers/esm/extends.cjs"),M=require("../../../@babel/runtime/helpers/esm/defineProperty.cjs"),V=require("../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),D=require("../../../../_virtual/index.cjs"),ee=require("../../../rc-dropdown/es/Dropdown.cjs"),te=require("../../../rc-menu/es/index.cjs"),o=require("../../../rc-util/es/KeyCode.cjs"),v=require("react"),ne=require("../util.cjs"),ae=require("./AddButton.cjs"),re=require("../../../rc-menu/es/MenuItem.cjs");function oe(e){const l=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(l,r,i.get?i:{enumerable:!0,get:()=>e[r]})}}return l.default=e,Object.freeze(l)}const a=oe(v);var le=a.forwardRef(function(e,l){var r=e.prefixCls,i=e.id,b=e.tabs,k=e.locale,B=e.mobile,N=e.more,h=N===void 0?{}:N,K=e.style,W=e.className,m=e.editable,z=e.tabBarGutter,w=e.rtl,G=e.removeAriaLabel,P=e.onTabClick,U=e.getPopupContainer,_=e.popupClassName,F=v.useState(!1),I=V(F,2),f=I[0],y=I[1],H=v.useState(null),O=V(H,2),c=O[0],S=O[1],R=h.icon,J=R===void 0?"More":R,E="".concat(i,"-more-popup"),g="".concat(r,"-dropdown"),j=c!==null?"".concat(E,"-").concat(c):null,A=k==null?void 0:k.dropdownAriaLabel,Q=a.createElement(te.default,{onClick:function(t){var n=t.key,u=t.domEvent;P(n,u),y(!1)},prefixCls:"".concat(g,"-menu"),id:E,tabIndex:-1,role:"listbox","aria-activedescendant":j,selectedKeys:[c],"aria-label":A!==void 0?A:"expanded dropdown"},b.map(function(t){var n=t.closable,u=t.disabled,d=t.closeIcon,s=t.key,C=t.label,p=ne.getRemovable(n,d,m,u);return a.createElement(re,{key:s,id:"".concat(E,"-").concat(s),role:"option","aria-controls":i&&"".concat(i,"-panel-").concat(s),disabled:u},a.createElement("span",null,C),p&&a.createElement("button",{type:"button","aria-label":G||"remove",tabIndex:0,className:"".concat(g,"-menu-item-remove"),onClick:function(T){T.stopPropagation(),function(q,Z){q.preventDefault(),q.stopPropagation(),m.onEdit("remove",{key:Z,event:q})}(T,s)}},d||m.removeIcon||"Ã—"))}));function L(t){for(var n=b.filter(function(p){return!p.disabled}),u=n.findIndex(function(p){return p.key===c})||0,d=n.length,s=0;s<d;s+=1){var C=n[u=(u+t+d)%d];if(!C.disabled)return void S(C.key)}}v.useEffect(function(){var t=document.getElementById(j);t&&t.scrollIntoView&&t.scrollIntoView(!1)},[c]),v.useEffect(function(){f||S(null)},[f]);var x=M({},w?"marginRight":"marginLeft",z);b.length||(x.visibility="hidden",x.order=1);var X=D(M({},"".concat(g,"-rtl"),w)),Y=B?null:a.createElement(ee,$({prefixCls:g,overlay:Q,visible:!!b.length&&f,onVisibleChange:y,overlayClassName:D(X,_),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:U},h),a.createElement("button",{type:"button",className:"".concat(r,"-nav-more"),style:x,"aria-haspopup":"listbox","aria-controls":E,id:"".concat(i,"-more"),"aria-expanded":f,onKeyDown:function(t){var n=t.which;if(f)switch(n){case o.UP:L(-1),t.preventDefault();break;case o.DOWN:L(1),t.preventDefault();break;case o.ESC:y(!1);break;case o.SPACE:case o.ENTER:c!==null&&P(c,t)}else[o.DOWN,o.SPACE,o.ENTER].includes(n)&&(y(!0),t.preventDefault())}},J));return a.createElement("div",{className:D("".concat(r,"-nav-operations"),W),style:K,ref:l},Y,a.createElement(ae,{prefixCls:r,locale:k,editable:m}))});const ie=a.memo(le,function(e,l){return l.tabMoving});module.exports=ie;
