"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const v=require("../../../@babel/runtime/helpers/esm/toConsumableArray.cjs"),y=require("../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),n=require("react"),w=require("../../../rc-util/es/warning.cjs"),E=require("../utils/timeUtil.cjs");function K(c){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(c){for(const r in c)if(r!=="default"){const i=Object.getOwnPropertyDescriptor(c,r);Object.defineProperty(o,r,i.get?i:{enumerable:!0,get:()=>c[r]})}}return o.default=c,Object.freeze(o)}const d=K(n);var b="__RC_UTIL_PATH_SPLIT__",S=function(c){return c.join(b)},g="rc-menu-more";exports.OVERFLOW_KEY=g,exports.default=function(){var c=d.useState({}),o=y(c,2)[1],r=n.useRef(new Map),i=n.useRef(new Map),_=d.useState([]),h=y(_,2),s=h[0],O=h[1],f=n.useRef(0),p=n.useRef(!1),P=n.useCallback(function(e,u){process.env.NODE_ENV!=="production"&&w.warningOnce(!r.current.has(e),"Duplicated key '".concat(e,"' used in Menu by path [").concat(u.join(" > "),"]"));var t=S(u);i.current.set(t,e),r.current.set(e,t),f.current+=1;var a=f.current;E.nextSlice(function(){a===f.current&&(p.current||o({}))})},[]),k=n.useCallback(function(e,u){var t=S(u);i.current.delete(t),r.current.delete(e)},[]),j=n.useCallback(function(e){O(e)},[]),l=n.useCallback(function(e,u){var t=r.current.get(e)||"",a=t.split(b);return u&&s.includes(a[0])&&a.unshift(g),a},[s]),m=n.useCallback(function(e,u){return e.filter(function(t){return t!==void 0}).some(function(t){return l(t,!0).includes(u)})},[l]),C=n.useCallback(function(e){var u="".concat(r.current.get(e)).concat(b),t=new Set;return v(i.current.keys()).forEach(function(a){a.startsWith(u)&&t.add(i.current.get(a))}),t},[]);return d.useEffect(function(){return function(){p.current=!0}},[]),{registerPath:P,unregisterPath:k,refreshOverflowKeys:j,isSubPathKey:m,getKeyPath:l,getKeys:function(){var e=v(r.current.keys());return s.length&&e.push(g),e},getSubPathKeys:C}};
