import T from "../../../@babel/runtime/helpers/esm/extends.js";
import l from "../../../@babel/runtime/helpers/esm/objectSpread2.js";
import _ from "../../../../_virtual/index.js";
import d from "../../../rc-util/es/hooks/useEvent.js";
import "../../../rc-util/es/hooks/useLayoutEffect.js";
import * as o from "react";
import "../../../rc-util/es/ref.js";
import k from "../../../rc-util/es/utils/get.js";
import { warningOnce as E } from "../../../rc-util/es/warning.js";
import { INTERNAL_HOOKS as I } from "../constant.js";
import { makeImmutable as h } from "../context/TableContext.js";
import D, { DEFAULT_PREFIX as H } from "../Table.js";
import C from "./BodyGrid.js";
import { StaticContext as R } from "./context.js";
var w = function(r, t) {
  var e = t.ref, i = t.onScroll;
  return o.createElement(C, { ref: e, data: r, onScroll: i });
};
function A(r, t) {
  var e = r.data, i = r.columns, a = r.scroll, c = r.sticky, s = r.prefixCls, y = s === void 0 ? H : s, g = r.className, u = r.listItemHeight, p = r.components, x = r.onScroll, f = a || {}, n = f.x, m = f.y;
  typeof n != "number" && (process.env.NODE_ENV !== "production" && E(!n, "`scroll.x` in virtual table must be number."), n = 1), typeof m != "number" && (m = 500, process.env.NODE_ENV !== "production" && E(!1, "`scroll.y` in virtual table must be number."));
  var v = d(function(V, O) {
    return k(p, V) || O;
  }), b = d(x), S = o.useMemo(function() {
    return { sticky: c, scrollY: m, listItemHeight: u, getComponent: v, onScroll: b };
  }, [c, m, u, v, b]);
  return o.createElement(R.Provider, { value: S }, o.createElement(D, T({}, r, { className: _(g, "".concat(y, "-virtual")), scroll: l(l({}, a), {}, { x: n }), components: l(l({}, p), {}, { body: e != null && e.length ? w : void 0 }), columns: i, internalHooks: I, tailor: !0, ref: t })));
}
var N = o.forwardRef(A);
function F(r) {
  return h(N, r);
}
process.env.NODE_ENV !== "production" && (N.displayName = "VirtualTable"), F();
export {
  F as genVirtualTable
};
