"use strict";const G=require("../../../@babel/runtime/helpers/esm/defineProperty.cjs"),m=require("../../../@babel/runtime/helpers/esm/objectSpread2.cjs"),v=require("../../../@babel/runtime/helpers/esm/toConsumableArray.cjs"),I=require("../../../@babel/runtime/helpers/esm/objectWithoutProperties.cjs"),J=require("../../../@rc-component/context/es/context.cjs"),D=require("../../../rc-util/es/ref.cjs"),d=require("react"),K=require("../../../../_virtual/index.cjs"),Q=require("../ColGroup.cjs"),U=require("../context/TableContext.cjs"),Y=require("../hooks/useRenderTimes.cjs");function Z(e){const s=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const u in e)if(u!=="default"){const a=Object.getOwnPropertyDescriptor(e,u);Object.defineProperty(s,u,a.get?a:{enumerable:!0,get:()=>e[u]})}}return s.default=e,Object.freeze(s)}const n=Z(d);var $=["className","noData","columns","flattenColumns","colWidths","columCount","stickyOffsets","direction","fixHeader","stickyTopOffset","stickyBottomOffset","stickyClassName","onScroll","maxContentScroll","children"],w=n.forwardRef(function(e,s){process.env.NODE_ENV!=="production"&&Y.default(e);var u=e.className,a=e.noData,b=e.columns,c=e.flattenColumns,M=e.colWidths,k=e.columCount,p=e.stickyOffsets,g=e.direction,j=e.fixHeader,L=e.stickyTopOffset,T=e.stickyBottomOffset,x=e.stickyClassName,H=e.onScroll,R=e.maxContentScroll,W=e.children,_=I(e,$),y=J.useContext(U.default,["prefixCls","scrollbarSize","isSticky","getComponent"]),z=y.prefixCls,B=y.scrollbarSize,C=y.isSticky,P=(0,y.getComponent)(["header","table"],"table"),o=C&&!j?0:B,h=n.useRef(null),V=n.useCallback(function(t){D.fillRef(s,t),D.fillRef(h,t)},[]);n.useEffect(function(){var t;function l(r){var i=r,f=i.currentTarget,E=i.deltaX;E&&(H({currentTarget:f,scrollLeft:f.scrollLeft+E}),r.preventDefault())}return(t=h.current)===null||t===void 0||t.addEventListener("wheel",l,{passive:!1}),function(){var r;(r=h.current)===null||r===void 0||r.removeEventListener("wheel",l)}},[]);var F=n.useMemo(function(){return c.every(function(t){return t.width})},[c]),N=c[c.length-1],q={fixed:N?N.fixed:null,scrollbar:!0,onHeaderCell:function(){return{className:"".concat(z,"-cell-scrollbar")}}},X=d.useMemo(function(){return o?[].concat(v(b),[q]):b},[o,b]),S=d.useMemo(function(){return o?[].concat(v(c),[q]):c},[o,c]),A=d.useMemo(function(){var t=p.right,l=p.left;return m(m({},p),{},{left:g==="rtl"?[].concat(v(l.map(function(r){return r+o})),[0]):l,right:g==="rtl"?t:[].concat(v(t.map(function(r){return r+o})),[0]),isSticky:C})},[o,p,C]),O=function(t,l){return d.useMemo(function(){for(var r=[],i=0;i<l;i+=1){var f=t[i];if(f===void 0)return null;r[i]=f}return r},[t.join("_"),l])}(M,k);return n.createElement("div",{style:m({overflow:"hidden"},C?{top:L,bottom:T}:{}),ref:V,className:K(u,G({},x,!!x))},n.createElement(P,{style:{tableLayout:"fixed",visibility:a||O?null:"hidden"}},(!a||!R||F)&&n.createElement(Q,{colWidths:O?[].concat(v(O),[o]):[],columCount:k+1,columns:S}),W(m(m({},_),{},{stickyOffsets:A,columns:X,flattenColumns:S}))))});process.env.NODE_ENV!=="production"&&(w.displayName="FixedHolder");const ee=n.memo(w);module.exports=ee;
