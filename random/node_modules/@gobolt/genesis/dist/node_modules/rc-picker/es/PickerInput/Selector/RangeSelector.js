import C from "../../../../@babel/runtime/helpers/esm/extends.js";
import m from "../../../../@babel/runtime/helpers/esm/defineProperty.js";
import s from "../../../../@babel/runtime/helpers/esm/objectSpread2.js";
import H from "../../../../@babel/runtime/helpers/esm/slicedToArray.js";
import te from "../../../../@babel/runtime/helpers/esm/typeof.js";
import M from "../../../../@babel/runtime/helpers/esm/objectWithoutProperties.js";
import oe from "../../../../../_virtual/index.js";
import ae from "../../../../rc-resize-observer/es/index.js";
import ie from "../../../../rc-util/es/hooks/useEvent.js";
import "../../../../rc-util/es/hooks/useLayoutEffect.js";
import * as t from "react";
import "../../../../rc-util/es/ref.js";
import "../../../../rc-util/es/warning.js";
import le from "../context.js";
import ce from "./hooks/useInputProps.js";
import ue from "./hooks/useRootProps.js";
import fe, { ClearIcon as me } from "./Icon.js";
import S from "./Input.js";
var se = ["id", "prefix", "clearIcon", "suffixIcon", "separator", "activeIndex", "activeHelp", "allHelp", "focused", "onFocus", "onBlur", "onKeyDown", "locale", "generateConfig", "placeholder", "className", "style", "onClick", "onClear", "value", "onChange", "onSubmit", "onInputChange", "format", "maskFormat", "preserveInvalidOnBlur", "onInvalid", "disabled", "invalid", "inputReadOnly", "direction", "onOpenChange", "onActiveInfo", "placement", "onMouseDown", "required", "aria-required", "autoFocus", "tabIndex"], de = ["index"];
function ve(e, q) {
  var u = e.id, x = e.prefix, E = e.clearIcon, A = e.suffixIcon, b = e.separator, K = b === void 0 ? "~" : b, y = e.activeIndex;
  e.activeHelp, e.allHelp;
  var j = e.focused;
  e.onFocus, e.onBlur, e.onKeyDown, e.locale, e.generateConfig;
  var a = e.placeholder, z = e.className, V = e.style, _ = e.onClick, G = e.onClear, R = e.value;
  e.onChange, e.onSubmit, e.onInputChange, e.format, e.maskFormat, e.preserveInvalidOnBlur, e.onInvalid;
  var i = e.disabled, J = e.invalid;
  e.inputReadOnly;
  var L = e.direction;
  e.onOpenChange;
  var P = e.onActiveInfo;
  e.placement;
  var w = e.onMouseDown;
  e.required, e["aria-required"];
  var N = e.autoFocus, F = e.tabIndex, Q = M(e, se), T = L === "rtl", o = t.useContext(le).prefixCls, U = t.useMemo(function() {
    if (typeof u == "string") return [u];
    var n = u || {};
    return [n.start, n.end];
  }, [u]), d = t.useRef(), v = t.useRef(), p = t.useRef(), l = function(n) {
    var r;
    return (r = [v, p][n]) === null || r === void 0 ? void 0 : r.current;
  };
  t.useImperativeHandle(q, function() {
    return { nativeElement: d.current, focus: function(n) {
      if (te(n) === "object") {
        var r, c = n || {}, f = c.index, g = f === void 0 ? 0 : f, re = M(c, de);
        (r = l(g)) === null || r === void 0 || r.focus(re);
      } else {
        var I;
        (I = l(n ?? 0)) === null || I === void 0 || I.focus();
      }
    }, blur: function() {
      var n, r;
      (n = l(0)) === null || n === void 0 || n.blur(), (r = l(1)) === null || r === void 0 || r.blur();
    } };
  });
  var W = ue(Q), X = t.useMemo(function() {
    return Array.isArray(a) ? a : [a, a];
  }, [a]), Y = ce(s(s({}, e), {}, { id: U, placeholder: X })), D = H(Y, 1)[0], Z = t.useState({ position: "absolute", width: 0 }), O = H(Z, 2), $ = O[0], h = O[1], B = ie(function() {
    var n = l(y);
    if (n) {
      var r = n.nativeElement.getBoundingClientRect(), c = d.current.getBoundingClientRect(), f = r.left - c.left;
      h(function(g) {
        return s(s({}, g), {}, { width: r.width, left: f });
      }), P([r.left, r.right, c.width]);
    }
  });
  t.useEffect(function() {
    B();
  }, [y]);
  var ee = E && (R[0] && !i[0] || R[1] && !i[1]), k = N && !i[0], ne = N && !k && !i[1];
  return t.createElement(ae, { onResize: B }, t.createElement("div", C({}, W, { className: oe(o, "".concat(o, "-range"), m(m(m(m({}, "".concat(o, "-focused"), j), "".concat(o, "-disabled"), i.every(function(n) {
    return n;
  })), "".concat(o, "-invalid"), J.some(function(n) {
    return n;
  })), "".concat(o, "-rtl"), T), z), style: V, ref: d, onClick: _, onMouseDown: function(n) {
    var r = n.target;
    r !== v.current.inputElement && r !== p.current.inputElement && n.preventDefault(), w == null || w(n);
  } }), x && t.createElement("div", { className: "".concat(o, "-prefix") }, x), t.createElement(S, C({ ref: v }, D(0), { autoFocus: k, tabIndex: F, "date-range": "start" })), t.createElement("div", { className: "".concat(o, "-range-separator") }, K), t.createElement(S, C({ ref: p }, D(1), { autoFocus: ne, tabIndex: F, "date-range": "end" })), t.createElement("div", { className: "".concat(o, "-active-bar"), style: $ }), t.createElement(fe, { type: "suffix", icon: A }), ee && t.createElement(me, { icon: E, onClear: G })));
}
var pe = t.forwardRef(ve);
process.env.NODE_ENV !== "production" && (pe.displayName = "RangeSelector");
export {
  pe as default
};
