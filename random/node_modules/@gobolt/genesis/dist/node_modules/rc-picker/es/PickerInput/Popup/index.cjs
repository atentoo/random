"use strict";const H=require("../../../../@babel/runtime/helpers/esm/defineProperty.cjs"),A=require("../../../../@babel/runtime/helpers/esm/extends.cjs"),f=require("../../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),L=require("../../../../../_virtual/index.cjs"),ge=require("../../../../rc-resize-observer/es/index.cjs"),he=require("react"),we=require("../../utils/miscUtil.cjs"),Ee=require("../context.cjs"),qe=require("./Footer.cjs"),be=require("./PopupPanel.cjs"),Me=require("./PresetPanel.cjs");function Se(e){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const u in e)if(u!=="default"){const a=Object.getOwnPropertyDescriptor(e,u);Object.defineProperty(o,u,a.get?a:{enumerable:!0,get:()=>e[u]})}}return o.default=e,Object.freeze(o)}const t=Se(he);module.exports=function(e){var o=e.panelRender,u=e.internalMode,a=e.picker,T=e.showNow,g=e.range,V=e.multiple,S=e.activeInfo,W=S===void 0?[0,0,0]:S,_=e.presets,G=e.onPresetHover,J=e.onPresetSubmit,K=e.onFocus,Q=e.onBlur,y=e.onPanelMouseDown,U=e.direction,x=e.value,X=e.onSelect,N=e.isInvalid,m=e.defaultOpenValue,Y=e.onOk,Z=e.onSubmit,r=t.useContext(Ee).prefixCls,$="".concat(r,"-panel"),c=U==="rtl",O=t.useRef(null),h=t.useRef(null),ee=t.useState(0),R=f(ee,2),l=R[0],te=R[1],ne=t.useState(0),C=f(ne,2),re=C[0],D=C[1],oe=t.useState(0),P=f(oe,2),ue=P[0],ae=P[1],w=f(W,3),d=w[0],E=w[1],j=w[2],ce=t.useState(0),k=f(ce,2),le=k[0],B=k[1];function I(n){return n.filter(function(i){return i})}t.useEffect(function(){B(10)},[d]),t.useEffect(function(){if(g&&h.current){var n,i=((n=O.current)===null||n===void 0?void 0:n.offsetWidth)||0,s=h.current.getBoundingClientRect();if(!s.height||s.right<0)return void B(function(ve){return Math.max(0,ve-1)});var me=(c?E-i:d)-s.left;if(ae(me),l&&l<j){var de=c?s.right-(E-i+l):d+i-s.left-l,pe=Math.max(0,de);D(pe)}else D(0)}},[le,c,l,d,E,j,g]);var p=t.useMemo(function(){return I(we.toArray(x))},[x]),v=a==="time"&&!p.length,q=t.useMemo(function(){return v?I([m]):p},[v,p,m]),ie=v?m:p,se=t.useMemo(function(){return!q.length||q.some(function(n){return N(n)})},[q,N]),b=t.createElement("div",{className:"".concat(r,"-panel-layout")},t.createElement(Me,{prefixCls:r,presets:_,onClick:J,onHover:G}),t.createElement("div",null,t.createElement(be,A({},e,{value:ie})),t.createElement(qe,A({},e,{showNow:!V&&T,invalid:se,onSubmit:function(){v&&X(m),Y(),Z()}}))));o&&(b=o(b));var fe="".concat($,"-container"),z="marginLeft",F="marginRight",M=t.createElement("div",{onMouseDown:y,tabIndex:-1,className:L(fe,"".concat(r,"-").concat(u,"-panel-container")),style:H(H({},c?F:z,re),c?z:F,"auto"),onFocus:K,onBlur:Q},b);return g&&(M=t.createElement("div",{onMouseDown:y,ref:h,className:L("".concat(r,"-range-wrapper"),"".concat(r,"-").concat(a,"-range-wrapper"))},t.createElement("div",{ref:O,className:"".concat(r,"-range-arrow"),style:{left:ue}}),t.createElement(ge,{onResize:function(n){n.width&&te(n.width)}},M))),M};
