import k from "../../../../../@babel/runtime/helpers/esm/objectSpread2.js";
import * as v from "react";
import "../../../../../rc-util/es/hooks/useLayoutEffect.js";
import "../../../../../rc-util/es/ref.js";
import { warningOnce as G } from "../../../../../rc-util/es/warning.js";
import J from "../../../../../rc-util/es/pickAttrs.js";
import { formatValue as L } from "../../../utils/dateUtil.js";
function $(e, m) {
  var c = e.format, x = e.maskFormat, a = e.generateConfig, f = e.locale, D = e.preserveInvalidOnBlur, I = e.inputReadOnly, w = e.required, E = e["aria-required"], F = e.onSubmit, q = e.onFocus, B = e.onBlur, P = e.onInputChange, s = e.onInvalid, H = e.open, d = e.onOpenChange, g = e.onKeyDown, M = e.onChange, N = e.activeHelp, V = e.name, K = e.autoComplete, S = e.id, h = e.value, j = e.invalid, _ = e.placeholder, z = e.disabled, y = e.activeIndex, R = e.allHelp, C = e.picker, T = function(n, t) {
    var o = a.locale.parse(f.locale, n, [t]);
    return o && a.isValidate(o) ? o : null;
  }, l = c[0], p = v.useCallback(function(n) {
    return L(n, { locale: f, format: l, generateConfig: a });
  }, [f, a, l]), b = v.useMemo(function() {
    return h.map(p);
  }, [h, p]), A = v.useMemo(function() {
    var n = C === "time" ? 8 : 10, t = typeof l == "function" ? l(a.getNow()).length : l.length;
    return Math.max(n, t) + 2;
  }, [l, C, a]), O = function(n) {
    for (var t = 0; t < c.length; t += 1) {
      var o = c[t];
      if (typeof o == "string") {
        var i = T(n, o);
        if (i) return i;
      }
    }
    return !1;
  };
  return [function(n) {
    function t(r) {
      return n !== void 0 ? r[n] : r;
    }
    var o = J(e, { aria: !0, data: !0 }), i = k(k({}, o), {}, { format: x, validateFormat: function(r) {
      return !!O(r);
    }, preserveInvalidOnBlur: D, readOnly: I, required: w, "aria-required": E, name: V, autoComplete: K, size: A, id: t(S), value: t(b) || "", invalid: t(j), placeholder: t(_), active: y === n, helped: R || N && y === n, disabled: t(z), onFocus: function(r) {
      q(r, n);
    }, onBlur: function(r) {
      B(r, n);
    }, onSubmit: F, onChange: function(r) {
      P();
      var u = O(r);
      if (u) return s(!1, n), void M(u, n);
      s(!!r, n);
    }, onHelp: function() {
      d(!0, { index: n });
    }, onKeyDown: function(r) {
      var u = !1;
      if (g == null || g(r, function() {
        process.env.NODE_ENV !== "production" && G(!1, "`preventDefault` callback is deprecated. Please call `event.preventDefault` directly."), u = !0;
      }), !r.defaultPrevented && !u) switch (r.key) {
        case "Escape":
          d(!1, { index: n });
          break;
        case "Enter":
          H || d(!0);
      }
    } }, m == null ? void 0 : m({ valueTexts: b }));
    return Object.keys(i).forEach(function(r) {
      i[r] === void 0 && delete i[r];
    }), i;
  }, p];
}
export {
  $ as default
};
