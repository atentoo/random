"use strict";const Re=require("../../../@babel/runtime/helpers/esm/extends.cjs"),Me=require("../../../@babel/runtime/helpers/esm/defineProperty.cjs"),L=require("../../../@babel/runtime/helpers/esm/objectSpread2.cjs"),Q=require("../../../@babel/runtime/helpers/esm/toConsumableArray.cjs"),f=require("../../../@babel/runtime/helpers/esm/slicedToArray.cjs"),Se=require("../../../../_virtual/index.cjs"),U=require("../../../rc-util/es/hooks/useEvent.cjs"),P=require("../../../rc-util/es/hooks/useMergedState.cjs");require("../../../rc-util/es/ref.cjs");const He=require("../../../rc-util/es/warning.cjs"),je=require("react"),Te=require("../hooks/useLocale.cjs"),X=require("../hooks/useTimeConfig.cjs"),Ae=require("../hooks/useToggleDates.cjs"),_e=require("../PickerInput/context.cjs"),ze=require("../PickerInput/hooks/useCellRender.cjs"),We=require("../utils/dateUtil.cjs"),Y=require("../utils/miscUtil.cjs"),Z=require("./context.cjs"),ee=require("./DatePanel/index.cjs"),Be=require("./DateTimePanel/index.cjs"),Fe=require("./DecadePanel/index.cjs"),Ge=require("./MonthPanel/index.cjs"),Je=require("./QuarterPanel/index.cjs"),Ke=require("./TimePanel/index.cjs"),Le=require("./WeekPanel/index.cjs"),Qe=require("./YearPanel/index.cjs");function Ue(r){const s=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const i in r)if(i!=="default"){const c=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(s,i,c.get?c:{enumerable:!0,get:()=>r[i]})}}return s.default=r,Object.freeze(s)}const n=Ue(je);var Xe={date:ee,datetime:Be,week:Le,month:Ge,quarter:Je,year:Qe,decade:Fe,time:Ke};function Ye(r,s){var i,c=r.locale,o=r.generateConfig,re=r.direction,te=r.prefixCls,V=r.tabIndex,ne=V===void 0?0:V,v=r.multiple,ae=r.defaultValue,ie=r.value,q=r.onChange,x=r.onSelect,ue=r.defaultPickerValue,h=r.pickerValue,w=r.onPickerValueChange,oe=r.mode,b=r.onPanelChange,y=r.picker,l=y===void 0?"date":y,ce=r.showTime,le=r.hoverValue,m=r.hoverRangeValue,de=r.cellRender,se=r.dateRender,fe=r.monthCellRender,E=r.components,ve=E===void 0?{}:E,N=r.hideHeader,D=((i=n.useContext(_e))===null||i===void 0?void 0:i.prefixCls)||te||"rc-picker",I=n.useRef();n.useImperativeHandle(s,function(){return{nativeElement:I.current}});var me=X.getTimeProps(r),g=f(me,4),O=g[0],ge=g[1],R=g[2],M=g[3],k=Te.default(c,ge),p=l==="date"&&ce?"datetime":l,S=n.useMemo(function(){return X.fillShowTimeConfig(p,R,M,O,k)},[p,R,M,O,k]),pe=o.getNow(),qe=P(l,{value:oe,postState:function(e){return e||"date"}}),H=f(qe,2),d=H[0],he=H[1],j=d==="date"&&S?"datetime":d,ke=Ae(o,c,p),Ce=P(ae,{value:ie}),T=f(Ce,2),A=T[0],Pe=T[1],a=n.useMemo(function(){var e=Y.toArray(A).filter(function(t){return t});return v?e:e.slice(0,1)},[A,v]),Ve=U(function(e){Pe(e),q&&(e===null||a.length!==e.length||a.some(function(t,u){return!We.isSame(o,c,t,e[u],p)}))&&(q==null||q(v?e:e[0]))}),xe=U(function(e){if(x==null||x(e),d===l){var t=v?ke(a,e):[e];Ve(t)}}),we=P(ue||a[0]||pe,{value:h}),_=f(we,2),be=_[0],z=_[1];n.useEffect(function(){a[0]&&!h&&z(a[0])},[a[0]]);var W=function(e,t){b==null||b(e||h,t||d)},C=function(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];z(e),w==null||w(e),t&&W(e)},B=function(e,t){he(e),t&&C(t),W(t,e)},ye=n.useMemo(function(){var e,t;if(Array.isArray(m)){var u=f(m,2);e=u[0],t=u[1]}else e=m;return e||t?(e=e||t,t=t||e,o.isAfter(e,t)?[t,e]:[e,t]):null},[m,o]),Ee=ze(de,se,fe),Ne=ve[j]||Xe[j]||ee,F=n.useContext(Z.PickerHackContext),De=n.useMemo(function(){return L(L({},F),{},{hideHeader:N})},[F,N]);process.env.NODE_ENV!=="production"&&He.warningOnce(!a||a.every(function(e){return o.isValidate(e)}),"Invalidate date pass to `value` or `defaultValue`.");var G="".concat(D,"-panel"),Ie=Y.pickProps(r,["showWeek","prevIcon","nextIcon","superPrevIcon","superNextIcon","disabledDate","minDate","maxDate","onHover"]);return n.createElement(Z.PickerHackContext.Provider,{value:De},n.createElement("div",{ref:I,tabIndex:ne,className:Se(G,Me({},"".concat(G,"-rtl"),re==="rtl"))},n.createElement(Ne,Re({},Ie,{showTime:S,prefixCls:D,locale:k,generateConfig:o,onModeChange:B,pickerValue:be,onPickerValueChange:function(e){C(e,!0)},value:a[0],onSelect:function(e){if(xe(e),C(e),d!==l){var t=["decade","year"],u=[].concat(t,["month"]),J={quarter:[].concat(t,["quarter"]),week:[].concat(Q(u),["week"]),date:[].concat(Q(u),["date"])}[l]||u,Oe=J.indexOf(d),K=J[Oe+1];K&&B(K,e)}},values:a,cellRender:Ee,hoverRangeValue:ye,hoverValue:le}))))}var $=n.memo(n.forwardRef(Ye));process.env.NODE_ENV!=="production"&&($.displayName="PanelPicker"),module.exports=$;
