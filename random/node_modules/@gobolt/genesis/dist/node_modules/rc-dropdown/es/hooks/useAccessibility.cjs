"use strict";const d=require("../../../rc-util/es/KeyCode.cjs"),b=require("../../../rc-util/es/raf.cjs");function w(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,o.get?o:{enumerable:!0,get:()=>e[t]})}}return r.default=e,Object.freeze(r)}const l=w(require("react"));var g=d.ESC,y=d.TAB;module.exports=function(e){var r=e.visible,t=e.triggerRef,o=e.onVisibleChange,v=e.autoFocus,i=e.overlayRef,c=l.useRef(!1),f=function(){var n,u;r&&((n=t.current)===null||n===void 0||(u=n.focus)===null||u===void 0||u.call(n),o==null||o(!1))},s=function(){var n;return!((n=i.current)===null||n===void 0||!n.focus)&&(i.current.focus(),c.current=!0,!0)},a=function(n){switch(n.keyCode){case g:f();break;case y:var u=!1;c.current||(u=s()),u?n.preventDefault():f()}};l.useEffect(function(){return r?(window.addEventListener("keydown",a),v&&b(s,3),function(){window.removeEventListener("keydown",a),c.current=!1}):function(){c.current=!1}},[r])};
