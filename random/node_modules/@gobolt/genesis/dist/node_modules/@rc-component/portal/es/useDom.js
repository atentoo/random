import C from "../../../@babel/runtime/helpers/esm/toConsumableArray.js";
import d from "../../../@babel/runtime/helpers/esm/slicedToArray.js";
import * as n from "react";
import l from "../../../rc-util/es/hooks/useLayoutEffect.js";
import g from "../../../rc-util/es/Dom/canUseDom.js";
import x from "./Context.js";
var s = [];
function O(i, a) {
  var v = n.useState(function() {
    if (!g()) return null;
    var t = document.createElement("div");
    return process.env.NODE_ENV !== "production" && a && t.setAttribute("data-debug", a), t;
  }), e = d(v, 1)[0], r = n.useRef(!1), o = n.useContext(x), E = n.useState(s), c = d(E, 2), u = c[0], f = c[1], h = o || (r.current ? void 0 : function(t) {
    f(function(b) {
      return [t].concat(C(b));
    });
  });
  function m() {
    e.parentElement || document.body.appendChild(e), r.current = !0;
  }
  function p() {
    var t;
    (t = e.parentElement) === null || t === void 0 || t.removeChild(e), r.current = !1;
  }
  return l(function() {
    return i ? o ? o(m) : m() : p(), p;
  }, [i]), l(function() {
    u.length && (u.forEach(function(t) {
      return t();
    }), f(s));
  }, [u]), [e, h];
}
export {
  O as default
};
