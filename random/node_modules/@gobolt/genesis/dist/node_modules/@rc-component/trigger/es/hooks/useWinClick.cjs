"use strict";const x=require("../../../../rc-util/es/Dom/shadow.cjs"),N=require("../../../../rc-util/es/warning.cjs"),R=require("react"),h=require("../util.cjs");function j(t){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const e in t)if(e!=="default"){const n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(o,e,n.get?n:{enumerable:!0,get:()=>t[e]})}}return o.default=t,Object.freeze(o)}const l=j(R);module.exports=function(t,o,e,n,m,f,L,w){var E=l.useRef(t);E.current=t;var c=l.useRef(!1);return l.useEffect(function(){if(o&&n&&(!m||f)){var p=function(){c.current=!1},r=function(s){var i;!E.current||L(((i=s.composedPath)===null||i===void 0||(i=i.call(s))===null||i===void 0?void 0:i[0])||s.target)||c.current||w(!1)},u=h.getWin(n);u.addEventListener("pointerdown",p,!0),u.addEventListener("mousedown",r,!0),u.addEventListener("contextmenu",r,!0);var d=x.getShadowRoot(e);if(d&&(d.addEventListener("mousedown",r,!0),d.addEventListener("contextmenu",r,!0)),process.env.NODE_ENV!=="production"){var v,a,b=e==null||(v=e.getRootNode)===null||v===void 0?void 0:v.call(e),O=(a=n.getRootNode)===null||a===void 0?void 0:a.call(n);N.warning(b===O,"trigger element and popup element should in same shadow root.")}return function(){u.removeEventListener("pointerdown",p,!0),u.removeEventListener("mousedown",r,!0),u.removeEventListener("contextmenu",r,!0),d&&(d.removeEventListener("mousedown",r,!0),d.removeEventListener("contextmenu",r,!0))}}},[o,e,n,m,f]),function(){c.current=!0}};
