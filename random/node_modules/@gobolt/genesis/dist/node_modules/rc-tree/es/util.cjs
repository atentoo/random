"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const F=require("../../@babel/runtime/helpers/esm/toConsumableArray.cjs"),B=require("../../@babel/runtime/helpers/esm/typeof.cjs"),I=require("../../rc-util/es/warning.cjs");require("react"),require("./TreeNode.cjs");const p=require("./utils/keyUtil.cjs");function k(e){return e.split("-")}function x(e){if(e.parent){var r=k(e.pos);return Number(r[r.length-1])===e.parent.children.length-1}return!1}function j(e){var r=k(e.pos);return Number(r[r.length-1])===0}exports.arrAdd=function(e,r){var n=(e||[]).slice();return n.indexOf(r)===-1&&n.push(r),n},exports.arrDel=function(e,r){if(!e)return[];var n=e.slice(),d=n.indexOf(r);return d>=0&&n.splice(d,1),n},exports.calcDropPosition=function(e,r,n,d,t,i,u,h,S,T){var v,w=e.clientX,N=e.clientY,K=e.target.getBoundingClientRect(),P=K.top,C=K.height,b=((T==="rtl"?-1:1)*(((t==null?void 0:t.x)||0)-w)-12)/d,m=S.filter(function(y){var s;return(s=h[y])===null||s===void 0||(s=s.children)===null||s===void 0?void 0:s.length}),o=p(h,n.eventKey);if(N<P+C/2){var q=u.findIndex(function(y){return y.key===o.key}),D=u[q<=0?0:q-1].key;o=p(h,D)}var E=o.key,L=o,A=o.key,a=0,g=0;if(!m.includes(E))for(var O=0;O<b&&x(o);O+=1)o=o.parent,g+=1;var l=r.data,c=o.node,f=!0;return j(o)&&o.level===0&&N<P+C/2&&i({dragNode:l,dropNode:c,dropPosition:-1})&&o.key===n.eventKey?a=-1:(L.children||[]).length&&m.includes(A)?i({dragNode:l,dropNode:c,dropPosition:0})?a=0:f=!1:g===0?b>-1.5?i({dragNode:l,dropNode:c,dropPosition:1})?a=1:f=!1:i({dragNode:l,dropNode:c,dropPosition:0})?a=0:i({dragNode:l,dropNode:c,dropPosition:1})?a=1:f=!1:i({dragNode:l,dropNode:c,dropPosition:1})?a=1:f=!1,{dropPosition:a,dropLevelOffset:g,dropTargetKey:o.key,dropTargetPos:o.pos,dragOverNodeKey:A,dropContainerKey:a===0?null:((v=o.parent)===null||v===void 0?void 0:v.key)||null,dropAllowed:f}},exports.calcSelectedKeys=function(e,r){if(e)return r.multiple?e.slice():e.length?[e[0]]:e},exports.conductExpandParent=function(e,r){var n=new Set;function d(t){if(!n.has(t)){var i=p(r,t);if(i){n.add(t);var u=i.parent;i.node.disabled||u&&d(u.key)}}}return(e||[]).forEach(function(t){d(t)}),F(n)},exports.getDragChildrenKeys=function(e,r){var n=[];return function d(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(function(t){var i=t.key,u=t.children;n.push(i),d(u)})}(p(r,e).children),n},exports.isFirstChild=j,exports.isLastChild=x,exports.parseCheckedKeys=function(e){if(!e)return null;var r;if(Array.isArray(e))r={checkedKeys:e,halfCheckedKeys:void 0};else{if(B(e)!=="object")return I.warningOnce(!1,"`checkedKeys` is not an array or an object"),null;r={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0}}return r},exports.posToArr=k;
