"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const y=require("../../../@babel/runtime/helpers/esm/objectSpread2.cjs"),q=require("./canUseDom.cjs"),L=require("./contains.cjs");var b="data-rc-order",C="data-rc-priority",p=new Map;function T(){var e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):"rc-util-key"}function v(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function h(e){return Array.from((p.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function m(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!q())return null;var r=t.csp,o=t.prepend,l=t.priority,u=l===void 0?0:l,i=function(d){return d==="queue"?"prependQueue":d?"prepend":"append"}(o),s=i==="prependQueue",n=document.createElement("style");n.setAttribute(b,i),s&&u&&n.setAttribute(C,"".concat(u)),r!=null&&r.nonce&&(n.nonce=r==null?void 0:r.nonce),n.innerHTML=e;var a=v(t),g=a.firstChild;if(o){if(s){var c=(t.styles||h(a)).filter(function(d){if(!["prepend","prependQueue"].includes(d.getAttribute(b)))return!1;var f=Number(d.getAttribute(C)||0);return u>=f});if(c.length)return a.insertBefore(n,c[c.length-1].nextSibling),n}a.insertBefore(n,g)}else a.appendChild(n);return n}function A(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=v(t);return(t.styles||h(r)).find(function(o){return o.getAttribute(T(t))===e})}exports.injectCSS=m,exports.removeCSS=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=A(e,t);r&&v(t).removeChild(r)},exports.updateCSS=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=v(r),l=h(o),u=y(y({},r),{},{styles:l});(function(c,d){var f=p.get(c);if(!f||!L(document,f)){var S=m("",d),M=S.parentNode;p.set(c,M),c.removeChild(S)}})(o,u);var i=A(t,u);if(i){var s,n,a;return(s=u.csp)!==null&&s!==void 0&&s.nonce&&i.nonce!==((n=u.csp)===null||n===void 0?void 0:n.nonce)&&(i.nonce=(a=u.csp)===null||a===void 0?void 0:a.nonce),i.innerHTML!==e&&(i.innerHTML=e),i}var g=m(e,u);return g.setAttribute(T(u),t),g};
